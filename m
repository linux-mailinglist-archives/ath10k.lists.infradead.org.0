Return-Path: <ath10k-bounces+lists+ath10k=lfdr.de@lists.infradead.org>
X-Original-To: lists+ath10k@lfdr.de
Delivered-To: lists+ath10k@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 7A187FEC2A
	for <lists+ath10k@lfdr.de>; Sat, 16 Nov 2019 12:57:50 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-ID:Date:To:From:Subject:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=SUKmfPrDXLQ+Tg6Iwpt9CYD7L1BkujHl+mgwQpj6eZ8=; b=DMudtc37G2Xr/Z
	licif0r+a/v5qIPspdoBsaWv/FRHMR2Shw6nKUgC6yx1XZe84d0IkpF+Tv0CX2VovjJLc/OGg5q22
	K1ZTJq2Ejf8t6umt7OzUtzhsGfq+9O1U1nVsrUcim9wYRnVrJGOZBHRKBD/wk8U+KVabDAED7fBY2
	NZoqtG8vlcWpVcwBUQ/CoGVgPJH0FonBcWTkYCRJjXj8njAFyzsBG3nu4Oeld7b8pDPThY+EZvEHX
	xHuOxyyk9dedfKwZfBRnhQ8Elfgj/8zUJQ/9l4qkeHBF5QoBD+YLHfk+tjsh2dfjc4MEzHe2oIqRA
	vO9arcIqmg7lUNiTv/Ig==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1iVwi4-00079y-Sq; Sat, 16 Nov 2019 11:57:48 +0000
Received: from us-smtp-2.mimecast.com ([205.139.110.61]
 helo=us-smtp-delivery-1.mimecast.com)
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1iVwhk-0006ro-W7
 for ath10k@lists.infradead.org; Sat, 16 Nov 2019 11:57:31 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1573905448;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=ABqX/4+Qx8L4BwRHEbiGEmTlEagYaiFV0Tg8XI1FKEQ=;
 b=DlLS1qd6CXSrIyRyZD3aKz7SATaY+LLW4/plOD+BVixbB2MAXDkZJA/mUcnJ+IgHxNZJRi
 6GCul60uA/J2f2z4bW73X/kMslXNb4j0co3K0n23tE5bvoVdBZgA2Q30ZgOAE3rNj/mtHo
 Lv4StJqt3aHonIanDWUelZgQ8E6D6x0=
Received: from mail-lf1-f71.google.com (mail-lf1-f71.google.com
 [209.85.167.71]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-352-b6IRfjZ9MziCg519CuWRvg-1; Sat, 16 Nov 2019 06:57:24 -0500
Received: by mail-lf1-f71.google.com with SMTP id h3so3973427lfp.17
 for <ath10k@lists.infradead.org>; Sat, 16 Nov 2019 03:57:24 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:from:to:cc:date:message-id:in-reply-to
 :references:user-agent:mime-version:content-transfer-encoding;
 bh=9zAB64m7P+ORU3V1Fb8QxkCq1zL7OXWN/zEiD4RzsPA=;
 b=LTDMs6cp9y/nktmWL5oCtYf2t8a08XpgxeXQuM4zkI9EPd9ftZY+ZRA1VdQJiZOltQ
 6bQEfpZC6QByh+uHZqsCS1djVUrvf474kwMk4L+Bi0TmjQ40cFVjuW27QndqFimgThtb
 F0jj4c+NjGsM7rDo47cqGN4/ufi++rwlwUTLcCGhqfioN/zViSNsPB5n8HCtNEKu6t/q
 wOjUhcqv2c8l/iQo4k1tG/NTHEN6mXTF2hj6T3aqOMoGBMU0jbXXyWsKPPlJ6gKIn18l
 O+MAoSOjxZtMjzxdSVD0Y7BLHepTRK+mly5e2VR1PT5cnVD+Rg3larCn+qtiQW9WmpYd
 QLrw==
X-Gm-Message-State: APjAAAVN8eDr7Nkqtsh+QBm6LusCQpxl++07sRYqAi3bJi2BrteeYWqW
 N5MA9kscvgpZkPu/OM6ITHgoWHz6Z5RwysdACn9y10xFpvtv+qiPcqRfRH9dN9sHeunZNtx+nwX
 UtnkgY6CRSBwowSlHs7bsCQ==
X-Received: by 2002:a2e:6a19:: with SMTP id f25mr11045020ljc.147.1573905442779; 
 Sat, 16 Nov 2019 03:57:22 -0800 (PST)
X-Google-Smtp-Source: APXvYqyvQeLwiPod2Ux0s2S+AoR3kiQ73VWoHM3EjqHpfi7+cY2xQl+WljmqeDIkvKoNVjjEg3HJOg==
X-Received: by 2002:a2e:6a19:: with SMTP id f25mr11044996ljc.147.1573905442382; 
 Sat, 16 Nov 2019 03:57:22 -0800 (PST)
Received: from alrua-x1.borgediget.toke.dk ([2a00:7660:6da:443::2])
 by smtp.gmail.com with ESMTPSA id z15sm1475941lfg.0.2019.11.16.03.57.20
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Sat, 16 Nov 2019 03:57:20 -0800 (PST)
Received: by alrua-x1.borgediget.toke.dk (Postfix, from userid 1000)
 id 44229181916; Sat, 16 Nov 2019 12:57:20 +0100 (CET)
Subject: [PATCH v10 3/4] mac80211: Implement Airtime-based Queue Limit (AQL)
From: =?utf-8?q?Toke_H=C3=B8iland-J=C3=B8rgensen?= <toke@redhat.com>
To: Johannes Berg <johannes@sipsolutions.net>
Date: Sat, 16 Nov 2019 12:57:20 +0100
Message-ID: <157390544018.662247.937727760317807167.stgit@toke.dk>
In-Reply-To: <157390543688.662247.3735146484299260207.stgit@toke.dk>
References: <157390543688.662247.3735146484299260207.stgit@toke.dk>
User-Agent: StGit/0.21
MIME-Version: 1.0
X-MC-Unique: b6IRfjZ9MziCg519CuWRvg-1
X-Mimecast-Spam-Score: 0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20191116_035729_189908_946CAB07 
X-CRM114-Status: GOOD (  16.95  )
X-Spam-Score: -2.5 (--)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (-2.5 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -2.3 RCVD_IN_DNSWL_MED      RBL: Sender listed at https://www.dnswl.org/,
 medium trust [205.139.110.61 listed in list.dnswl.org]
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
X-BeenThere: ath10k@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <ath10k.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/ath10k>,
 <mailto:ath10k-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/ath10k/>
List-Post: <mailto:ath10k@lists.infradead.org>
List-Help: <mailto:ath10k-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/ath10k>,
 <mailto:ath10k-request@lists.infradead.org?subject=subscribe>
Cc: Kan Yan <kyan@google.com>, Rajkumar Manoharan <rmanohar@codeaurora.org>,
 Kevin Hayes <kevinhayes@google.com>, make-wifi-fast@lists.bufferbloat.net,
 linux-wireless@vger.kernel.org, ath10k@lists.infradead.org,
 John Crispin <john@phrozen.org>, Lorenzo Bianconi <lorenzo@kernel.org>,
 Felix Fietkau <nbd@nbd.name>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "ath10k" <ath10k-bounces@lists.infradead.org>
Errors-To: ath10k-bounces+lists+ath10k=lfdr.de@lists.infradead.org

RnJvbTogS2FuIFlhbiA8a3lhbkBnb29nbGUuY29tPgoKSW4gb3JkZXIgZm9yIHRoZSBGcV9Db0Rl
bCBhbGdvcml0aG0gaW50ZWdyYXRlZCBpbiBtYWM4MDIxMSBsYXllciB0byBvcGVyYXRlCmVmZmVj
dGl2ZWx5IHRvIGNvbnRyb2wgZXhjZXNzaXZlIHF1ZXVlaW5nIGxhdGVuY3ksIHRoZSBDb0RlbCBh
bGdvcml0aG0KcmVxdWlyZXMgYW4gYWNjdXJhdGUgbWVhc3VyZSBvZiBob3cgbG9uZyBwYWNrZXRz
IHN0YXlzIGluIHRoZSBxdWV1ZSwgQUtBCnNvam91cm4gdGltZS4gVGhlIHNvam91cm4gdGltZSBt
ZWFzdXJlZCBhdCB0aGUgbWFjODAyMTEgbGF5ZXIgZG9lc24ndAppbmNsdWRlIHF1ZXVlaW5nIGxh
dGVuY3kgaW4gdGhlIGxvd2VyIGxheWVyIChmaXJtd2FyZS9oYXJkd2FyZSkgYW5kIENvRGVsCmV4
cGVjdHMgbG93ZXIgbGF5ZXIgdG8gaGF2ZSBhIHNob3J0IHF1ZXVlLiBIb3dldmVyLCBtb3N0IDgw
Mi4xMWFjIGNoaXBzZXRzCm9mZmxvYWQgdGFza3Mgc3VjaCBUWCBhZ2dyZWdhdGlvbiB0byBmaXJt
d2FyZSBvciBoYXJkd2FyZSwgdGh1cyBoYXZlIGEgZGVlcApsb3dlciBsYXllciBxdWV1ZS4KCldp
dGhvdXQgYSBtZWNoYW5pc20gdG8gY29udHJvbCB0aGUgbG93ZXIgbGF5ZXIgcXVldWUgc2l6ZSwg
cGFja2V0cyBvbmx5CnN0YXkgaW4gbWFjODAyMTEgbGF5ZXIgdHJhbnNpZW50bHkgYmVmb3JlIGJl
aW5nIHNlbnQgdG8gZmlybXdhcmUgcXVldWUuCkFzIGEgcmVzdWx0LCB0aGUgc29qb3VybiB0aW1l
IG1lYXN1cmVkIGJ5IENvRGVsIGluIHRoZSBtYWM4MDIxMSBsYXllciBpcwphbG1vc3QgYWx3YXlz
IGxvd2VyIHRoYW4gdGhlIENvRGVsIGxhdGVuY3kgdGFyZ2V0LCBoZW5jZSBDb0RlbCBkb2VzIGxp
dHRsZQp0byBjb250cm9sIHRoZSBsYXRlbmN5LCBldmVuIHdoZW4gdGhlIGxvd2VyIGxheWVyIHF1
ZXVlIGNhdXNlcyBleGNlc3NpdmUKbGF0ZW5jeS4KClRoZSBCeXRlIFF1ZXVlIExpbWl0cyAoQlFM
KSBtZWNoYW5pc20gaXMgY29tbW9ubHkgdXNlZCB0byBhZGRyZXNzIHRoZQpzaW1pbGFyIGlzc3Vl
IHdpdGggd2lyZWQgbmV0d29yayBpbnRlcmZhY2UuIEhvd2V2ZXIsIHRoaXMgbWV0aG9kIGNhbm5v
dCBiZQphcHBsaWVkIGRpcmVjdGx5IHRvIHRoZSB3aXJlbGVzcyBuZXR3b3JrIGludGVyZmFjZS4g
IkJ5dGVzIiBpcyBub3QgYQpzdWl0YWJsZSBtZWFzdXJlIG9mIHF1ZXVlIGRlcHRoIGluIHRoZSB3
aXJlbGVzcyBuZXR3b3JrLCBhcyB0aGUgZGF0YSByYXRlCmNhbiB2YXJ5IGRyYW1hdGljYWxseSBm
cm9tIHN0YXRpb24gdG8gc3RhdGlvbiBpbiB0aGUgc2FtZSBuZXR3b3JrLCBmcm9tIGEKZmV3IE1i
cHMgdG8gb3ZlciBHYnBzLgoKVGhpcyBwYXRjaCBpbXBsZW1lbnRzIGFuIEFpcnRpbWUtYmFzZWQg
UXVldWUgTGltaXQgKEFRTCkgdG8gbWFrZSBDb0RlbCB3b3JrCmVmZmVjdGl2ZWx5IHdpdGggd2ly
ZWxlc3MgZHJpdmVycyB0aGF0IHV0aWxpemVkIGZpcm13YXJlL2hhcmR3YXJlCm9mZmxvYWRpbmcu
IEFRTCBhbGxvd3MgZWFjaCB0eHEgdG8gcmVsZWFzZSBqdXN0IGVub3VnaCBwYWNrZXRzIHRvIHRo
ZSBsb3dlcgpsYXllciB0byBmb3JtIDEtMiBsYXJnZSBhZ2dyZWdhdGlvbnMgdG8ga2VlcCBoYXJk
d2FyZSBmdWxseSB1dGlsaXplZCBhbmQKcmV0YWlucyB0aGUgcmVzdCBvZiB0aGUgZnJhbWVzIGlu
IG1hYzgwMjExIGxheWVyIHRvIGJlIGNvbnRyb2xsZWQgYnkgdGhlCkNvRGVsIGFsZ29yaXRobS4K
ClNpZ25lZC1vZmYtYnk6IEthbiBZYW4gPGt5YW5AZ29vZ2xlLmNvbT4KWyBUb2tlOiBLZWVwIEFQ
SSB0byBzZXQgcGVuZGluZyBhaXJ0aW1lIGludGVybmFsLCBmaXggbml0cyBpbiBjb21taXQgbXNn
IF0KU2lnbmVkLW9mZi1ieTogVG9rZSBIw7hpbGFuZC1Kw7hyZ2Vuc2VuIDx0b2tlQHJlZGhhdC5j
b20+Ci0tLQogaW5jbHVkZS9uZXQvY2ZnODAyMTEuaCAgICAgfCAgICA3ICsrKysKIGluY2x1ZGUv
bmV0L21hYzgwMjExLmggICAgIHwgICAxMiArKysrKysKIG5ldC9tYWM4MDIxMS9kZWJ1Z2ZzLmMg
ICAgIHwgICA4NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwog
bmV0L21hYzgwMjExL2RlYnVnZnNfc3RhLmMgfCAgIDQzICsrKysrKysrKysrKysrKysrLS0tLS0K
IG5ldC9tYWM4MDIxMS9pZWVlODAyMTFfaS5oIHwgICAgNCArKwogbmV0L21hYzgwMjExL21haW4u
YyAgICAgICAgfCAgIDEwICsrKysrCiBuZXQvbWFjODAyMTEvc3RhX2luZm8uYyAgICB8ICAgMzgg
KysrKysrKysrKysrKysrKysrKysKIG5ldC9tYWM4MDIxMS9zdGFfaW5mby5oICAgIHwgICAgOCAr
KysrCiBuZXQvbWFjODAyMTEvdHguYyAgICAgICAgICB8ICAgNDcgKysrKysrKysrKysrKysrKysr
KysrKystCiA5IGZpbGVzIGNoYW5nZWQsIDI0MCBpbnNlcnRpb25zKCspLCAxNCBkZWxldGlvbnMo
LSkKCmRpZmYgLS1naXQgYS9pbmNsdWRlL25ldC9jZmc4MDIxMS5oIGIvaW5jbHVkZS9uZXQvY2Zn
ODAyMTEuaAppbmRleCBlMzA5Y2M4MjZiNDAuLjRmNzVkYmRkNDA2YSAxMDA2NDQKLS0tIGEvaW5j
bHVkZS9uZXQvY2ZnODAyMTEuaAorKysgYi9pbmNsdWRlL25ldC9jZmc4MDIxMS5oCkBAIC0yNjA2
LDYgKzI2MDYsMTMgQEAgZW51bSB3aXBoeV9wYXJhbXNfZmxhZ3MgewogCiAjZGVmaW5lIElFRUU4
MDIxMV9ERUZBVUxUX0FJUlRJTUVfV0VJR0hUCTI1NgogCisvKiBUaGUgcGVyIFRYUSBkZXZpY2Ug
cXVldWUgbGltaXQgaW4gYWlydGltZSAqLworI2RlZmluZSBJRUVFODAyMTFfREVGQVVMVF9BUUxf
VFhRX0xJTUlUX0wJNDAwMAorI2RlZmluZSBJRUVFODAyMTFfREVGQVVMVF9BUUxfVFhRX0xJTUlU
X0gJODAwMAorCisvKiBUaGUgcGVyIGludGVyZmFjZSBhaXJ0aW1lIHRocmVzaG9sZCB0byBzd2l0
Y2ggdG8gbG93ZXIgcXVldWUgbGltaXQgKi8KKyNkZWZpbmUgSUVFRTgwMjExX0FRTF9USFJFU0hP
TEQJCQkyNDAwMAorCiAvKioKICAqIHN0cnVjdCBjZmc4MDIxMV9wbWtzYSAtIFBNSyBTZWN1cml0
eSBBc3NvY2lhdGlvbgogICoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0L21hYzgwMjExLmggYi9p
bmNsdWRlL25ldC9tYWM4MDIxMS5oCmluZGV4IDZmYzI2YTA1MWJhMC4uYmEzZjMzY2M0MWVhIDEw
MDY0NAotLS0gYS9pbmNsdWRlL25ldC9tYWM4MDIxMS5oCisrKyBiL2luY2x1ZGUvbmV0L21hYzgw
MjExLmgKQEAgLTU1NjUsNiArNTU2NSwxOCBAQCB2b2lkIGllZWU4MDIxMV9zZW5kX2Vvc3BfbnVs
bGZ1bmMoc3RydWN0IGllZWU4MDIxMV9zdGEgKnB1YnN0YSwgaW50IHRpZCk7CiB2b2lkIGllZWU4
MDIxMV9zdGFfcmVnaXN0ZXJfYWlydGltZShzdHJ1Y3QgaWVlZTgwMjExX3N0YSAqcHVic3RhLCB1
OCB0aWQsCiAJCQkJICAgIHUzMiB0eF9haXJ0aW1lLCB1MzIgcnhfYWlydGltZSk7CiAKKy8qKgor
ICogaWVlZTgwMjExX3R4cV9haXJ0aW1lX2NoZWNrIC0gY2hlY2sgaWYgYSB0eHEgY2FuIHNlbmQg
ZnJhbWUgdG8gZGV2aWNlCisgKgorICogQGh3OiBwb2ludGVyIG9idGFpbmVkIGZyb20gaWVlZTgw
MjExX2FsbG9jX2h3KCkKKyAqIEB0eHE6IHBvaW50ZXIgb2J0YWluZWQgZnJvbSBzdGF0aW9uIG9y
IHZpcnR1YWwgaW50ZXJmYWNlCisgKgorICogUmV0dXJuIHRydWUgaWYgdGhlIEFRTCdzIGFpcnRp
bWUgbGltaXQgaGFzIG5vdCBiZWVuIHJlYWNoZWQgYW5kIHRoZSB0eHEgY2FuCisgKiBjb250aW51
ZSB0byBzZW5kIG1vcmUgcGFja2V0cyB0byB0aGUgZGV2aWNlLiBPdGhlcndpc2UgcmV0dXJuIGZh
bHNlLgorICovCitib29sCitpZWVlODAyMTFfdHhxX2FpcnRpbWVfY2hlY2soc3RydWN0IGllZWU4
MDIxMV9odyAqaHcsIHN0cnVjdCBpZWVlODAyMTFfdHhxICp0eHEpOworCiAvKioKICAqIGllZWU4
MDIxMV9pdGVyX2tleXMgLSBpdGVyYXRlIGtleXMgcHJvZ3JhbW1lZCBpbnRvIHRoZSBkZXZpY2UK
ICAqIEBodzogcG9pbnRlciBvYnRhaW5lZCBmcm9tIGllZWU4MDIxMV9hbGxvY19odygpCmRpZmYg
LS1naXQgYS9uZXQvbWFjODAyMTEvZGVidWdmcy5jIGIvbmV0L21hYzgwMjExL2RlYnVnZnMuYwpp
bmRleCA1NjhiM2IyNzY5MzEuLjM5OWQ0ZThiODU0NiAxMDA2NDQKLS0tIGEvbmV0L21hYzgwMjEx
L2RlYnVnZnMuYworKysgYi9uZXQvbWFjODAyMTEvZGVidWdmcy5jCkBAIC0xNDgsNiArMTQ4LDg3
IEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIGFxbV9vcHMgPSB7CiAJLmxs
c2VlayA9IGRlZmF1bHRfbGxzZWVrLAogfTsKIAorc3RhdGljIHNzaXplX3QgYXFsX3R4cV9saW1p
dF9yZWFkKHN0cnVjdCBmaWxlICpmaWxlLAorCQkJCSAgY2hhciBfX3VzZXIgKnVzZXJfYnVmLAor
CQkJCSAgc2l6ZV90IGNvdW50LAorCQkJCSAgbG9mZl90ICpwcG9zKQoreworCXN0cnVjdCBpZWVl
ODAyMTFfbG9jYWwgKmxvY2FsID0gZmlsZS0+cHJpdmF0ZV9kYXRhOworCWNoYXIgYnVmWzQwMF07
CisJaW50IGxlbiA9IDA7CisKKwlsZW4gPSBzY25wcmludGYoYnVmLCBzaXplb2YoYnVmKSwKKwkJ
CSJBQwlBUUwgbGltaXQgbG93CUFRTCBsaW1pdCBoaWdoXG4iCisJCQkiVk8JJXUJCSV1XG4iCisJ
CQkiVkkJJXUJCSV1XG4iCisJCQkiQkUJJXUJCSV1XG4iCisJCQkiQksJJXUJCSV1XG4iLAorCQkJ
bG9jYWwtPmFxbF90eHFfbGltaXRfbG93W0lFRUU4MDIxMV9BQ19WT10sCisJCQlsb2NhbC0+YXFs
X3R4cV9saW1pdF9oaWdoW0lFRUU4MDIxMV9BQ19WT10sCisJCQlsb2NhbC0+YXFsX3R4cV9saW1p
dF9sb3dbSUVFRTgwMjExX0FDX1ZJXSwKKwkJCWxvY2FsLT5hcWxfdHhxX2xpbWl0X2hpZ2hbSUVF
RTgwMjExX0FDX1ZJXSwKKwkJCWxvY2FsLT5hcWxfdHhxX2xpbWl0X2xvd1tJRUVFODAyMTFfQUNf
QkVdLAorCQkJbG9jYWwtPmFxbF90eHFfbGltaXRfaGlnaFtJRUVFODAyMTFfQUNfQkVdLAorCQkJ
bG9jYWwtPmFxbF90eHFfbGltaXRfbG93W0lFRUU4MDIxMV9BQ19CS10sCisJCQlsb2NhbC0+YXFs
X3R4cV9saW1pdF9oaWdoW0lFRUU4MDIxMV9BQ19CS10pOworCXJldHVybiBzaW1wbGVfcmVhZF9m
cm9tX2J1ZmZlcih1c2VyX2J1ZiwgY291bnQsIHBwb3MsCisJCQkJICAgICAgIGJ1ZiwgbGVuKTsK
K30KKworc3RhdGljIHNzaXplX3QgYXFsX3R4cV9saW1pdF93cml0ZShzdHJ1Y3QgZmlsZSAqZmls
ZSwKKwkJCQkgICBjb25zdCBjaGFyIF9fdXNlciAqdXNlcl9idWYsCisJCQkJICAgc2l6ZV90IGNv
dW50LAorCQkJCSAgIGxvZmZfdCAqcHBvcykKK3sKKwlzdHJ1Y3QgaWVlZTgwMjExX2xvY2FsICps
b2NhbCA9IGZpbGUtPnByaXZhdGVfZGF0YTsKKwljaGFyIGJ1ZlsxMDBdOworCXNpemVfdCBsZW47
CisJdTMyIGFjLCBxX2xpbWl0X2xvdywgcV9saW1pdF9oaWdoLCBxX2xpbWl0X2xvd19vbGQsIHFf
bGltaXRfaGlnaF9vbGQ7CisJc3RydWN0IHN0YV9pbmZvICpzdGE7CisKKwlpZiAoY291bnQgPiBz
aXplb2YoYnVmKSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoY29weV9mcm9tX3VzZXIoYnVm
LCB1c2VyX2J1ZiwgY291bnQpKQorCQlyZXR1cm4gLUVGQVVMVDsKKworCWJ1ZltzaXplb2YoYnVm
KSAtIDFdID0gMDsKKwlsZW4gPSBzdHJsZW4oYnVmKTsKKwlpZiAobGVuID4gMCAmJiBidWZbbGVu
IC0gMV0gPT0gJ1xuJykKKwkJYnVmW2xlbiAtIDFdID0gMDsKKworCWlmIChzc2NhbmYoYnVmLCAi
JXUgJXUgJXUiLCAmYWMsICZxX2xpbWl0X2xvdywgJnFfbGltaXRfaGlnaCkgIT0gMykKKwkJcmV0
dXJuIC1FSU5WQUw7CisKKwlpZiAoYWMgPj0gSUVFRTgwMjExX05VTV9BQ1MpCisJCXJldHVybiAt
RUlOVkFMOworCisJcV9saW1pdF9sb3dfb2xkID0gbG9jYWwtPmFxbF90eHFfbGltaXRfbG93W2Fj
XTsKKwlxX2xpbWl0X2hpZ2hfb2xkID0gbG9jYWwtPmFxbF90eHFfbGltaXRfaGlnaFthY107CisK
Kwlsb2NhbC0+YXFsX3R4cV9saW1pdF9sb3dbYWNdID0gcV9saW1pdF9sb3c7CisJbG9jYWwtPmFx
bF90eHFfbGltaXRfaGlnaFthY10gPSBxX2xpbWl0X2hpZ2g7CisKKwltdXRleF9sb2NrKCZsb2Nh
bC0+c3RhX210eCk7CisJbGlzdF9mb3JfZWFjaF9lbnRyeShzdGEsICZsb2NhbC0+c3RhX2xpc3Qs
IGxpc3QpIHsKKwkJLyogSWYgYSBzdGEgaGFzIGN1c3RvbWl6ZWQgcXVldWUgbGltaXRzLCBrZWVw
IGl0ICovCisJCWlmIChzdGEtPmFpcnRpbWVbYWNdLmFxbF9saW1pdF9sb3cgPT0gcV9saW1pdF9s
b3dfb2xkICYmCisJCSAgICBzdGEtPmFpcnRpbWVbYWNdLmFxbF9saW1pdF9oaWdoID09IHFfbGlt
aXRfaGlnaF9vbGQpIHsKKwkJCXN0YS0+YWlydGltZVthY10uYXFsX2xpbWl0X2xvdyA9IHFfbGlt
aXRfbG93OworCQkJc3RhLT5haXJ0aW1lW2FjXS5hcWxfbGltaXRfaGlnaCA9IHFfbGltaXRfaGln
aDsKKwkJfQorCX0KKwltdXRleF91bmxvY2soJmxvY2FsLT5zdGFfbXR4KTsKKwlyZXR1cm4gY291
bnQ7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIGFxbF90eHFfbGlt
aXRfb3BzID0geworCS53cml0ZSA9IGFxbF90eHFfbGltaXRfd3JpdGUsCisJLnJlYWQgPSBhcWxf
dHhxX2xpbWl0X3JlYWQsCisJLm9wZW4gPSBzaW1wbGVfb3BlbiwKKwkubGxzZWVrID0gZGVmYXVs
dF9sbHNlZWssCit9OworCiBzdGF0aWMgc3NpemVfdCBmb3JjZV90eF9zdGF0dXNfcmVhZChzdHJ1
Y3QgZmlsZSAqZmlsZSwKIAkJCQkgICAgY2hhciBfX3VzZXIgKnVzZXJfYnVmLAogCQkJCSAgICBz
aXplX3QgY291bnQsCkBAIC00NDEsNiArNTIyLDEwIEBAIHZvaWQgZGVidWdmc19od19hZGQoc3Ry
dWN0IGllZWU4MDIxMV9sb2NhbCAqbG9jYWwpCiAJZGVidWdmc19jcmVhdGVfdTE2KCJhaXJ0aW1l
X2ZsYWdzIiwgMDYwMCwKIAkJCSAgIHBoeWQsICZsb2NhbC0+YWlydGltZV9mbGFncyk7CiAKKwlE
RUJVR0ZTX0FERChhcWxfdHhxX2xpbWl0KTsKKwlkZWJ1Z2ZzX2NyZWF0ZV91MzIoImFxbF90aHJl
c2hvbGQiLCAwNjAwLAorCQkJICAgcGh5ZCwgJmxvY2FsLT5hcWxfdGhyZXNob2xkKTsKKwogCXN0
YXRzZCA9IGRlYnVnZnNfY3JlYXRlX2Rpcigic3RhdGlzdGljcyIsIHBoeWQpOwogCiAJLyogaWYg
dGhlIGRpciBmYWlsZWQsIGRvbid0IHB1dCBhbGwgdGhlIG90aGVyIHRoaW5ncyBpbnRvIHRoZSBy
b290ISAqLwpkaWZmIC0tZ2l0IGEvbmV0L21hYzgwMjExL2RlYnVnZnNfc3RhLmMgYi9uZXQvbWFj
ODAyMTEvZGVidWdmc19zdGEuYwppbmRleCBjOGFkMjBjMjhjNDMuLjAxODVlNmU1ZTVkMSAxMDA2
NDQKLS0tIGEvbmV0L21hYzgwMjExL2RlYnVnZnNfc3RhLmMKKysrIGIvbmV0L21hYzgwMjExL2Rl
YnVnZnNfc3RhLmMKQEAgLTE5NywxMCArMTk3LDEyIEBAIHN0YXRpYyBzc2l6ZV90IHN0YV9haXJ0
aW1lX3JlYWQoc3RydWN0IGZpbGUgKmZpbGUsIGNoYXIgX191c2VyICp1c2VyYnVmLAogewogCXN0
cnVjdCBzdGFfaW5mbyAqc3RhID0gZmlsZS0+cHJpdmF0ZV9kYXRhOwogCXN0cnVjdCBpZWVlODAy
MTFfbG9jYWwgKmxvY2FsID0gc3RhLT5zZGF0YS0+bG9jYWw7Ci0Jc2l6ZV90IGJ1ZnN6ID0gMjAw
OworCXNpemVfdCBidWZzeiA9IDQwMDsKIAljaGFyICpidWYgPSBremFsbG9jKGJ1ZnN6LCBHRlBf
S0VSTkVMKSwgKnAgPSBidWY7CiAJdTY0IHJ4X2FpcnRpbWUgPSAwLCB0eF9haXJ0aW1lID0gMDsK
IAlzNjQgZGVmaWNpdFtJRUVFODAyMTFfTlVNX0FDU107CisJdTMyIHFfZGVwdGhbSUVFRTgwMjEx
X05VTV9BQ1NdOworCXUzMiBxX2xpbWl0X2xbSUVFRTgwMjExX05VTV9BQ1NdLCBxX2xpbWl0X2hb
SUVFRTgwMjExX05VTV9BQ1NdOwogCXNzaXplX3QgcnY7CiAJaW50IGFjOwogCkBAIC0yMTIsMTkg
KzIxNCwyMiBAQCBzdGF0aWMgc3NpemVfdCBzdGFfYWlydGltZV9yZWFkKHN0cnVjdCBmaWxlICpm
aWxlLCBjaGFyIF9fdXNlciAqdXNlcmJ1ZiwKIAkJcnhfYWlydGltZSArPSBzdGEtPmFpcnRpbWVb
YWNdLnJ4X2FpcnRpbWU7CiAJCXR4X2FpcnRpbWUgKz0gc3RhLT5haXJ0aW1lW2FjXS50eF9haXJ0
aW1lOwogCQlkZWZpY2l0W2FjXSA9IHN0YS0+YWlydGltZVthY10uZGVmaWNpdDsKKwkJcV9saW1p
dF9sW2FjXSA9IHN0YS0+YWlydGltZVthY10uYXFsX2xpbWl0X2xvdzsKKwkJcV9saW1pdF9oW2Fj
XSA9IHN0YS0+YWlydGltZVthY10uYXFsX2xpbWl0X2hpZ2g7CiAJCXNwaW5fdW5sb2NrX2JoKCZs
b2NhbC0+YWN0aXZlX3R4cV9sb2NrW2FjXSk7CisJCXFfZGVwdGhbYWNdID0gYXRvbWljX3JlYWQo
JnN0YS0+YWlydGltZVthY10uYXFsX3R4X3BlbmRpbmcpOwogCX0KIAogCXAgKz0gc2NucHJpbnRm
KHAsIGJ1ZnN6ICsgYnVmIC0gcCwKIAkJIlJYOiAlbGx1IHVzXG5UWDogJWxsdSB1c1xuV2VpZ2h0
OiAldVxuIgotCQkiRGVmaWNpdDogVk86ICVsbGQgdXMgVkk6ICVsbGQgdXMgQkU6ICVsbGQgdXMg
Qks6ICVsbGQgdXNcbiIsCi0JCXJ4X2FpcnRpbWUsCi0JCXR4X2FpcnRpbWUsCi0JCXN0YS0+YWly
dGltZV93ZWlnaHQsCi0JCWRlZmljaXRbMF0sCi0JCWRlZmljaXRbMV0sCi0JCWRlZmljaXRbMl0s
Ci0JCWRlZmljaXRbM10pOworCQkiRGVmaWNpdDogVk86ICVsbGQgdXMgVkk6ICVsbGQgdXMgQkU6
ICVsbGQgdXMgQks6ICVsbGQgdXNcbiIKKwkJIlEgZGVwdGg6IFZPOiAldSB1cyBWSTogJXUgdXMg
QkU6ICV1IHVzIEJLOiAldSB1c1xuIgorCQkiUSBsaW1pdFtsb3cvaGlnaF06IFZPOiAldS8ldSBW
STogJXUvJXUgQkU6ICV1LyV1IEJLOiAldS8ldVxuIiwKKwkJcnhfYWlydGltZSwgdHhfYWlydGlt
ZSwgc3RhLT5haXJ0aW1lX3dlaWdodCwKKwkJZGVmaWNpdFswXSwgZGVmaWNpdFsxXSwgZGVmaWNp
dFsyXSwgZGVmaWNpdFszXSwKKwkJcV9kZXB0aFswXSwgcV9kZXB0aFsxXSwgcV9kZXB0aFsyXSwg
cV9kZXB0aFszXSwKKwkJcV9saW1pdF9sWzBdLCBxX2xpbWl0X2hbMF0sIHFfbGltaXRfbFsxXSwg
cV9saW1pdF9oWzFdLAorCQlxX2xpbWl0X2xbMl0sIHFfbGltaXRfaFsyXSwgcV9saW1pdF9sWzNd
LCBxX2xpbWl0X2hbM10pLAogCiAJcnYgPSBzaW1wbGVfcmVhZF9mcm9tX2J1ZmZlcih1c2VyYnVm
LCBjb3VudCwgcHBvcywgYnVmLCBwIC0gYnVmKTsKIAlrZnJlZShidWYpOwpAQCAtMjM2LDcgKzI0
MSwyNSBAQCBzdGF0aWMgc3NpemVfdCBzdGFfYWlydGltZV93cml0ZShzdHJ1Y3QgZmlsZSAqZmls
ZSwgY29uc3QgY2hhciBfX3VzZXIgKnVzZXJidWYsCiB7CiAJc3RydWN0IHN0YV9pbmZvICpzdGEg
PSBmaWxlLT5wcml2YXRlX2RhdGE7CiAJc3RydWN0IGllZWU4MDIxMV9sb2NhbCAqbG9jYWwgPSBz
dGEtPnNkYXRhLT5sb2NhbDsKLQlpbnQgYWM7CisJdTMyIGFjLCBxX2xpbWl0X2wsIHFfbGltaXRf
aDsKKwljaGFyIF9idWZbMTAwXSA9IHt9LCAqYnVmID0gX2J1ZjsKKworCWlmIChjb3VudCA+IHNp
emVvZihfYnVmKSkKKwkJcmV0dXJuIC1FSU5WQUw7CisKKwlpZiAoY29weV9mcm9tX3VzZXIoYnVm
LCB1c2VyYnVmLCBjb3VudCkpCisJCXJldHVybiAtRUZBVUxUOworCisJYnVmW3NpemVvZihfYnVm
KSAtIDFdID0gJ1wwJzsKKwlpZiAoc3NjYW5mKGJ1ZiwgInF1ZXVlIGxpbWl0ICV1ICV1ICV1Iiwg
JmFjLCAmcV9saW1pdF9sLCAmcV9saW1pdF9oKQorCSAgICAhPSAzKQorCQlyZXR1cm4gLUVJTlZB
TDsKKworCWlmIChhYyA+PSBJRUVFODAyMTFfTlVNX0FDUykKKwkJcmV0dXJuIC1FSU5WQUw7CisK
KwlzdGEtPmFpcnRpbWVbYWNdLmFxbF9saW1pdF9sb3cgPSBxX2xpbWl0X2w7CisJc3RhLT5haXJ0
aW1lW2FjXS5hcWxfbGltaXRfaGlnaCA9IHFfbGltaXRfaDsKIAogCWZvciAoYWMgPSAwOyBhYyA8
IElFRUU4MDIxMV9OVU1fQUNTOyBhYysrKSB7CiAJCXNwaW5fbG9ja19iaCgmbG9jYWwtPmFjdGl2
ZV90eHFfbG9ja1thY10pOwpkaWZmIC0tZ2l0IGEvbmV0L21hYzgwMjExL2llZWU4MDIxMV9pLmgg
Yi9uZXQvbWFjODAyMTEvaWVlZTgwMjExX2kuaAppbmRleCAyMjVlYTRlM2NkNzYuLmFkMTViM2Jl
OGJiMyAxMDA2NDQKLS0tIGEvbmV0L21hYzgwMjExL2llZWU4MDIxMV9pLmgKKysrIGIvbmV0L21h
YzgwMjExL2llZWU4MDIxMV9pLmgKQEAgLTExNDIsNiArMTE0MiwxMCBAQCBzdHJ1Y3QgaWVlZTgw
MjExX2xvY2FsIHsKIAl1MTYgc2NoZWR1bGVfcm91bmRbSUVFRTgwMjExX05VTV9BQ1NdOwogCiAJ
dTE2IGFpcnRpbWVfZmxhZ3M7CisJdTMyIGFxbF90eHFfbGltaXRfbG93W0lFRUU4MDIxMV9OVU1f
QUNTXTsKKwl1MzIgYXFsX3R4cV9saW1pdF9oaWdoW0lFRUU4MDIxMV9OVU1fQUNTXTsKKwl1MzIg
YXFsX3RocmVzaG9sZDsKKwlhdG9taWNfdCBhcWxfdG90YWxfcGVuZGluZ19haXJ0aW1lOwogCiAJ
Y29uc3Qgc3RydWN0IGllZWU4MDIxMV9vcHMgKm9wczsKIApkaWZmIC0tZ2l0IGEvbmV0L21hYzgw
MjExL21haW4uYyBiL25ldC9tYWM4MDIxMS9tYWluLmMKaW5kZXggYWJhMDk0YjRjY2ZjLi4wNzFl
YTkyYTM3NDggMTAwNjQ0Ci0tLSBhL25ldC9tYWM4MDIxMS9tYWluLmMKKysrIGIvbmV0L21hYzgw
MjExL21haW4uYwpAQCAtNjY3LDggKzY2NywxNiBAQCBzdHJ1Y3QgaWVlZTgwMjExX2h3ICppZWVl
ODAyMTFfYWxsb2NfaHdfbm0oc2l6ZV90IHByaXZfZGF0YV9sZW4sCiAJZm9yIChpID0gMDsgaSA8
IElFRUU4MDIxMV9OVU1fQUNTOyBpKyspIHsKIAkJSU5JVF9MSVNUX0hFQUQoJmxvY2FsLT5hY3Rp
dmVfdHhxc1tpXSk7CiAJCXNwaW5fbG9ja19pbml0KCZsb2NhbC0+YWN0aXZlX3R4cV9sb2NrW2ld
KTsKKwkJbG9jYWwtPmFxbF90eHFfbGltaXRfbG93W2ldID0gSUVFRTgwMjExX0RFRkFVTFRfQVFM
X1RYUV9MSU1JVF9MOworCQlsb2NhbC0+YXFsX3R4cV9saW1pdF9oaWdoW2ldID0KKwkJCUlFRUU4
MDIxMV9ERUZBVUxUX0FRTF9UWFFfTElNSVRfSDsKIAl9Ci0JbG9jYWwtPmFpcnRpbWVfZmxhZ3Mg
PSBBSVJUSU1FX1VTRV9UWCB8IEFJUlRJTUVfVVNFX1JYOworCisJbG9jYWwtPmFpcnRpbWVfZmxh
Z3MgPSBBSVJUSU1FX1VTRV9UWCB8CisJCQkgICAgICAgQUlSVElNRV9VU0VfUlggfAorCQkJICAg
ICAgIEFJUlRJTUVfVVNFX0FRTDsKKwlsb2NhbC0+YXFsX3RocmVzaG9sZCA9IElFRUU4MDIxMV9B
UUxfVEhSRVNIT0xEOworCWF0b21pY19zZXQoJmxvY2FsLT5hcWxfdG90YWxfcGVuZGluZ19haXJ0
aW1lLCAwKTsKIAogCUlOSVRfTElTVF9IRUFEKCZsb2NhbC0+Y2hhbmN0eF9saXN0KTsKIAltdXRl
eF9pbml0KCZsb2NhbC0+Y2hhbmN0eF9tdHgpOwpkaWZmIC0tZ2l0IGEvbmV0L21hYzgwMjExL3N0
YV9pbmZvLmMgYi9uZXQvbWFjODAyMTEvc3RhX2luZm8uYwppbmRleCA0NjVkODNiMTM1ODIuLjFm
ZTAyMDIyYTMxYSAxMDA2NDQKLS0tIGEvbmV0L21hYzgwMjExL3N0YV9pbmZvLmMKKysrIGIvbmV0
L21hYzgwMjExL3N0YV9pbmZvLmMKQEAgLTQxNiw2ICs0MTYsOSBAQCBzdHJ1Y3Qgc3RhX2luZm8g
KnN0YV9pbmZvX2FsbG9jKHN0cnVjdCBpZWVlODAyMTFfc3ViX2lmX2RhdGEgKnNkYXRhLAogCQlz
a2JfcXVldWVfaGVhZF9pbml0KCZzdGEtPnBzX3R4X2J1ZltpXSk7CiAJCXNrYl9xdWV1ZV9oZWFk
X2luaXQoJnN0YS0+dHhfZmlsdGVyZWRbaV0pOwogCQlzdGEtPmFpcnRpbWVbaV0uZGVmaWNpdCA9
IHN0YS0+YWlydGltZV93ZWlnaHQ7CisJCWF0b21pY19zZXQoJnN0YS0+YWlydGltZVtpXS5hcWxf
dHhfcGVuZGluZywgMCk7CisJCXN0YS0+YWlydGltZVtpXS5hcWxfbGltaXRfbG93ID0gbG9jYWwt
PmFxbF90eHFfbGltaXRfbG93W2ldOworCQlzdGEtPmFpcnRpbWVbaV0uYXFsX2xpbWl0X2hpZ2gg
PSBsb2NhbC0+YXFsX3R4cV9saW1pdF9oaWdoW2ldOwogCX0KIAogCWZvciAoaSA9IDA7IGkgPCBJ
RUVFODAyMTFfTlVNX1RJRFM7IGkrKykKQEAgLTE5MTMsNiArMTkxNiw0MSBAQCB2b2lkIGllZWU4
MDIxMV9zdGFfcmVnaXN0ZXJfYWlydGltZShzdHJ1Y3QgaWVlZTgwMjExX3N0YSAqcHVic3RhLCB1
OCB0aWQsCiB9CiBFWFBPUlRfU1lNQk9MKGllZWU4MDIxMV9zdGFfcmVnaXN0ZXJfYWlydGltZSk7
CiAKK3ZvaWQgaWVlZTgwMjExX3N0YV91cGRhdGVfcGVuZGluZ19haXJ0aW1lKHN0cnVjdCBpZWVl
ODAyMTFfbG9jYWwgKmxvY2FsLAorCQkJCQkgIHN0cnVjdCBzdGFfaW5mbyAqc3RhLCB1OCBhYywK
KwkJCQkJICB1MTYgdHhfYWlydGltZSwgYm9vbCB0eF9jb21wbGV0ZWQpCit7CisJaW50IHR4X3Bl
bmRpbmc7CisKKwlpZiAoIXR4X2NvbXBsZXRlZCkgeworCQlpZiAoc3RhKQorCQkJYXRvbWljX2Fk
ZCh0eF9haXJ0aW1lLAorCQkJCSAgICZzdGEtPmFpcnRpbWVbYWNdLmFxbF90eF9wZW5kaW5nKTsK
KworCQlhdG9taWNfYWRkKHR4X2FpcnRpbWUsICZsb2NhbC0+YXFsX3RvdGFsX3BlbmRpbmdfYWly
dGltZSk7CisJCXJldHVybjsKKwl9CisKKwlpZiAoc3RhKSB7CisJCXR4X3BlbmRpbmcgPSBhdG9t
aWNfc3ViX3JldHVybih0eF9haXJ0aW1lLAorCQkJCQkgICAgICAgJnN0YS0+YWlydGltZVthY10u
YXFsX3R4X3BlbmRpbmcpOworCQlpZiAoV0FSTl9PTkNFKHR4X3BlbmRpbmcgPCAwLAorCQkJICAg
ICAgIlNUQSAlcE0gQUMgJWQgdHhxIHBlbmRpbmcgYWlydGltZSB1bmRlcmZsb3c6ICV1LCAldSIs
CisJCQkgICAgICBzdGEtPmFkZHIsIGFjLCB0eF9wZW5kaW5nLCB0eF9haXJ0aW1lKSkKKwkJCWF0
b21pY19jbXB4Y2hnKCZzdGEtPmFpcnRpbWVbYWNdLmFxbF90eF9wZW5kaW5nLAorCQkJCSAgICAg
ICB0eF9wZW5kaW5nLCAwKTsKKwl9CisKKwl0eF9wZW5kaW5nID0gYXRvbWljX3N1Yl9yZXR1cm4o
dHhfYWlydGltZSwKKwkJCQkgICAgICAgJmxvY2FsLT5hcWxfdG90YWxfcGVuZGluZ19haXJ0aW1l
KTsKKwlpZiAoV0FSTl9PTkNFKHR4X3BlbmRpbmcgPCAwLAorCQkgICAgICAiRGV2aWNlICVzIEFD
ICVkIHBlbmRpbmcgYWlydGltZSB1bmRlcmZsb3c6ICV1LCAldSIsCisJCSAgICAgIHdpcGh5X25h
bWUobG9jYWwtPmh3LndpcGh5KSwgYWMsIHR4X3BlbmRpbmcsCisJCSAgICAgIHR4X2FpcnRpbWUp
KQorCQlhdG9taWNfY21weGNoZygmbG9jYWwtPmFxbF90b3RhbF9wZW5kaW5nX2FpcnRpbWUsCisJ
CQkgICAgICAgdHhfcGVuZGluZywgMCk7Cit9CisKIGludCBzdGFfaW5mb19tb3ZlX3N0YXRlKHN0
cnVjdCBzdGFfaW5mbyAqc3RhLAogCQkJZW51bSBpZWVlODAyMTFfc3RhX3N0YXRlIG5ld19zdGF0
ZSkKIHsKZGlmZiAtLWdpdCBhL25ldC9tYWM4MDIxMS9zdGFfaW5mby5oIGIvbmV0L21hYzgwMjEx
L3N0YV9pbmZvLmgKaW5kZXggODBlNzY1NjkxNDRlLi4wNjA4ZDQ5YjM4MjYgMTAwNjQ0Ci0tLSBh
L25ldC9tYWM4MDIxMS9zdGFfaW5mby5oCisrKyBiL25ldC9tYWM4MDIxMS9zdGFfaW5mby5oCkBA
IC0xMjcsMTMgKzEyNywyMSBAQCBlbnVtIGllZWU4MDIxMV9hZ2dfc3RvcF9yZWFzb24gewogLyog
RGVidWdmcyBmbGFncyB0byBlbmFibGUvZGlzYWJsZSB1c2Ugb2YgUlgvVFggYWlydGltZSBpbiBz
Y2hlZHVsZXIgKi8KICNkZWZpbmUgQUlSVElNRV9VU0VfVFgJCUJJVCgwKQogI2RlZmluZSBBSVJU
SU1FX1VTRV9SWAkJQklUKDEpCisjZGVmaW5lIEFJUlRJTUVfVVNFX0FRTAkJQklUKDIpCiAKIHN0
cnVjdCBhaXJ0aW1lX2luZm8gewogCXU2NCByeF9haXJ0aW1lOwogCXU2NCB0eF9haXJ0aW1lOwog
CXM2NCBkZWZpY2l0OworCWF0b21pY190IGFxbF90eF9wZW5kaW5nOyAvKiBFc3RpbWF0ZWQgYWly
dGltZSBmb3IgZnJhbWVzIHBlbmRpbmcgKi8KKwl1MzIgYXFsX2xpbWl0X2xvdzsKKwl1MzIgYXFs
X2xpbWl0X2hpZ2g7CiB9OwogCit2b2lkIGllZWU4MDIxMV9zdGFfdXBkYXRlX3BlbmRpbmdfYWly
dGltZShzdHJ1Y3QgaWVlZTgwMjExX2xvY2FsICpsb2NhbCwKKwkJCQkJICBzdHJ1Y3Qgc3RhX2lu
Zm8gKnN0YSwgdTggYWMsCisJCQkJCSAgdTE2IHR4X2FpcnRpbWUsIGJvb2wgdHhfY29tcGxldGVk
KTsKKwogc3RydWN0IHN0YV9pbmZvOwogCiAvKioKZGlmZiAtLWdpdCBhL25ldC9tYWM4MDIxMS90
eC5jIGIvbmV0L21hYzgwMjExL3R4LmMKaW5kZXggZGIzOGJlMWI3NWZhLi5hYWZjNjdiNTYyZWIg
MTAwNjQ0Ci0tLSBhL25ldC9tYWM4MDIxMS90eC5jCisrKyBiL25ldC9tYWM4MDIxMS90eC5jCkBA
IC0zNjc0LDcgKzM2NzQsOCBAQCBzdHJ1Y3QgaWVlZTgwMjExX3R4cSAqaWVlZTgwMjExX25leHRf
dHhxKHN0cnVjdCBpZWVlODAyMTFfaHcgKmh3LCB1OCBhYykKIHsKIAlzdHJ1Y3QgaWVlZTgwMjEx
X2xvY2FsICpsb2NhbCA9IGh3X3RvX2xvY2FsKGh3KTsKIAlzdHJ1Y3QgaWVlZTgwMjExX3R4cSAq
cmV0ID0gTlVMTDsKLQlzdHJ1Y3QgdHhxX2luZm8gKnR4cWkgPSBOVUxMOworCXN0cnVjdCB0eHFf
aW5mbyAqdHhxaSA9IE5VTEwsICpoZWFkID0gTlVMTDsKKwlib29sIGZvdW5kX2VsaWdpYmxlX3R4
cSA9IGZhbHNlOwogCiAJc3Bpbl9sb2NrX2JoKCZsb2NhbC0+YWN0aXZlX3R4cV9sb2NrW2FjXSk7
CiAKQEAgLTM2ODUsMTMgKzM2ODYsMjYgQEAgc3RydWN0IGllZWU4MDIxMV90eHEgKmllZWU4MDIx
MV9uZXh0X3R4cShzdHJ1Y3QgaWVlZTgwMjExX2h3ICpodywgdTggYWMpCiAJaWYgKCF0eHFpKQog
CQlnb3RvIG91dDsKIAorCWlmICh0eHFpID09IGhlYWQgJiYgIWZvdW5kX2VsaWdpYmxlX3R4cSkK
KwkJZ290byBvdXQ7CisKKwlpZiAoIWhlYWQpCisJCWhlYWQgPSB0eHFpOworCiAJaWYgKHR4cWkt
PnR4cS5zdGEpIHsKIAkJc3RydWN0IHN0YV9pbmZvICpzdGEgPSBjb250YWluZXJfb2YodHhxaS0+
dHhxLnN0YSwKLQkJCQkJCXN0cnVjdCBzdGFfaW5mbywgc3RhKTsKKwkJCQkJCSAgICBzdHJ1Y3Qg
c3RhX2luZm8sIHN0YSk7CisJCWJvb2wgYXFsX2NoZWNrID0gaWVlZTgwMjExX3R4cV9haXJ0aW1l
X2NoZWNrKGh3LCAmdHhxaS0+dHhxKTsKKwkJczY0IGRlZmljaXQgPSBzdGEtPmFpcnRpbWVbdHhx
aS0+dHhxLmFjXS5kZWZpY2l0OworCisJCWlmIChhcWxfY2hlY2spCisJCQlmb3VuZF9lbGlnaWJs
ZV90eHEgPSB0cnVlOwogCi0JCWlmIChzdGEtPmFpcnRpbWVbdHhxaS0+dHhxLmFjXS5kZWZpY2l0
IDwgMCkgeworCQlpZiAoZGVmaWNpdCA8IDApCiAJCQlzdGEtPmFpcnRpbWVbdHhxaS0+dHhxLmFj
XS5kZWZpY2l0ICs9CiAJCQkJc3RhLT5haXJ0aW1lX3dlaWdodDsKKworCQlpZiAoZGVmaWNpdCA8
IDAgfHwgIWFxbF9jaGVjaykgewogCQkJbGlzdF9tb3ZlX3RhaWwoJnR4cWktPnNjaGVkdWxlX29y
ZGVyLAogCQkJCSAgICAgICAmbG9jYWwtPmFjdGl2ZV90eHFzW3R4cWktPnR4cS5hY10pOwogCQkJ
Z290byBiZWdpbjsKQEAgLTM3NDUsNiArMzc1OSwzMyBAQCB2b2lkIF9faWVlZTgwMjExX3NjaGVk
dWxlX3R4cShzdHJ1Y3QgaWVlZTgwMjExX2h3ICpodywKIH0KIEVYUE9SVF9TWU1CT0woX19pZWVl
ODAyMTFfc2NoZWR1bGVfdHhxKTsKIAorYm9vbCBpZWVlODAyMTFfdHhxX2FpcnRpbWVfY2hlY2so
c3RydWN0IGllZWU4MDIxMV9odyAqaHcsCisJCQkJIHN0cnVjdCBpZWVlODAyMTFfdHhxICp0eHEp
Cit7CisJc3RydWN0IHN0YV9pbmZvICpzdGE7CisJc3RydWN0IGllZWU4MDIxMV9sb2NhbCAqbG9j
YWwgPSBod190b19sb2NhbChodyk7CisKKwlpZiAoIShsb2NhbC0+YWlydGltZV9mbGFncyAmIEFJ
UlRJTUVfVVNFX0FRTCkpCisJCXJldHVybiB0cnVlOworCisJaWYgKCF0eHEtPnN0YSkKKwkJcmV0
dXJuIHRydWU7CisKKwlzdGEgPSBjb250YWluZXJfb2YodHhxLT5zdGEsIHN0cnVjdCBzdGFfaW5m
bywgc3RhKTsKKwlpZiAoYXRvbWljX3JlYWQoJnN0YS0+YWlydGltZVt0eHEtPmFjXS5hcWxfdHhf
cGVuZGluZykgPAorCSAgICBzdGEtPmFpcnRpbWVbdHhxLT5hY10uYXFsX2xpbWl0X2xvdykKKwkJ
cmV0dXJuIHRydWU7CisKKwlpZiAoYXRvbWljX3JlYWQoJmxvY2FsLT5hcWxfdG90YWxfcGVuZGlu
Z19haXJ0aW1lKSA8CisJICAgIGxvY2FsLT5hcWxfdGhyZXNob2xkICYmCisJICAgIGF0b21pY19y
ZWFkKCZzdGEtPmFpcnRpbWVbdHhxLT5hY10uYXFsX3R4X3BlbmRpbmcpIDwKKwkgICAgc3RhLT5h
aXJ0aW1lW3R4cS0+YWNdLmFxbF9saW1pdF9oaWdoKQorCQlyZXR1cm4gdHJ1ZTsKKworCXJldHVy
biBmYWxzZTsKK30KK0VYUE9SVF9TWU1CT0woaWVlZTgwMjExX3R4cV9haXJ0aW1lX2NoZWNrKTsK
KwogYm9vbCBpZWVlODAyMTFfdHhxX21heV90cmFuc21pdChzdHJ1Y3QgaWVlZTgwMjExX2h3ICpo
dywKIAkJCQlzdHJ1Y3QgaWVlZTgwMjExX3R4cSAqdHhxKQogewoKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmF0aDEwayBtYWlsaW5nIGxpc3QKYXRoMTBr
QGxpc3RzLmluZnJhZGVhZC5vcmcKaHR0cDovL2xpc3RzLmluZnJhZGVhZC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9hdGgxMGsK
