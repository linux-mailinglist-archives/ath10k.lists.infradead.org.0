Return-Path: <ath10k-bounces+lists+ath10k=lfdr.de@lists.infradead.org>
X-Original-To: lists+ath10k@lfdr.de
Delivered-To: lists+ath10k@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id F3873D7D4C
	for <lists+ath10k@lfdr.de>; Tue, 15 Oct 2019 19:19:17 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-ID:Date:To:From:Subject:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=nr+F+Nf2fUmOIY9Xji0hGpp5jYngF1ibFOdZJYwuqNg=; b=s3OdUtgymMQ040
	UFrtWs9D5PjJC2St7AljXmbb/IGwofc0MNyQ0KRNM9NleSCh6m30gyQXxJcVtbW1lDLMsGz2lL8GC
	UYt5b/tx3JG5OQRzOI4ATdCjZihof673/3+q17S+zIXfeqLslRvz4J7h0UwL0QxJZFg4jI+FBCjqM
	dl4FOiHKPp6h9dnPH0n70cDmoPEHBhNUq1/RNaUlzN8S3HZ+kWnQ2etew2EYGaceTVemXUc7QW+OJ
	fy6Qhm2teiVpWgR2H5BnfY3bzUT94AM59Bzsk/g0xMC3shzVLqaf36bRUAMxJqO5UCoOrAGoXTD1w
	Jm1MWCeaVq42xLH5fSAQ==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1iKQTc-00073K-A4; Tue, 15 Oct 2019 17:19:16 +0000
Received: from us-smtp-1.mimecast.com ([207.211.31.81]
 helo=us-smtp-delivery-1.mimecast.com)
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1iKQTU-0006zL-F6
 for ath10k@lists.infradead.org; Tue, 15 Oct 2019 17:19:10 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=redhat.com;
 s=mimecast20190719; t=1571159947;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=XnkDlyOiYYUttRmAdYa5cySMniZ9t2R59IF001zI9ZE=;
 b=TRfH4eGXPgrLUe/rM4vO1ClCT0KmvnH4ZjLO5KK27S0J597fEUejLCsz+lWwGcm2WTdset
 VRokCTARd0ZZL3WzB7p+oYrewjsYcLAy/sKbOigdDtGZvBhJ5XSVHMQJG3KlnUiM4s2rIQ
 sMjwY2TDedfJEw9hujhAP7SotWn9j0U=
Received: from mail-lf1-f71.google.com (mail-lf1-f71.google.com
 [209.85.167.71]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-169-cLEWKKAANQSAj_tS1WEXPw-1; Tue, 15 Oct 2019 13:19:05 -0400
Received: by mail-lf1-f71.google.com with SMTP id w22so3927100lfe.2
 for <ath10k@lists.infradead.org>; Tue, 15 Oct 2019 10:19:04 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:from:to:cc:date:message-id:in-reply-to
 :references:user-agent:mime-version:content-transfer-encoding;
 bh=IFzHIo7rEgOEbTBpyBUconBFu5SsXwEfs6ZewoNOLxo=;
 b=At4SqA2w1xy7C4drUaubsMdAxn0HgOslf9l60BtALbbH+y6CSuiSbZYQFAE55IRtqu
 00IzmVYEbjQuGxgdhs3dakhi712Gidn1EsQnqFxHhf9RThlyyE5c+0Y1rShbVwSL5iEq
 qg3lbz09uDGc5H3tC6pPfTfFCSLaVXJX1/eXeRApbFFGfiixKLHjVnjPX8Ly0wcREtzh
 xpW1CxbBCkyv6p+3bWB0+xp2PpHBSfGVfTxhD6hTfSxGrSIUnyNkkgqRCXPDZLcJC1IR
 x5q18x9dHmgSNcsHgXO7HGekZOhP3uE5sPDPUjFTb+hdJYDTCwWuh/TMeX8/EL7pvBuR
 mAVQ==
X-Gm-Message-State: APjAAAUmCks4ntqm7uqieDjPnLRqdYS2qxB4YViPViCfaOL7HJToV6U1
 3uTjsEY4qpHELe6rCxGXn+athse2OhInxBgHWukEO6FQrP8ijpyRYTz9gXO5a2lqTfAbRxPaNUP
 O9j3ghw8YJ+r1O2Pr2ENZaA==
X-Received: by 2002:a05:651c:1069:: with SMTP id
 y9mr13229251ljm.171.1571159942693; 
 Tue, 15 Oct 2019 10:19:02 -0700 (PDT)
X-Google-Smtp-Source: APXvYqyjSYa0JNvu0wF2H3xMh8lZQ3RmGD1nKvu+kMymV3E4Jtxv0qcmmb0RHfHWg8pk9ItYXJGm6w==
X-Received: by 2002:a05:651c:1069:: with SMTP id
 y9mr13229214ljm.171.1571159942143; 
 Tue, 15 Oct 2019 10:19:02 -0700 (PDT)
Received: from alrua-x1.borgediget.toke.dk ([2a00:7660:6da:443::2])
 by smtp.gmail.com with ESMTPSA id i17sm5248094lfj.35.2019.10.15.10.19.01
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 15 Oct 2019 10:19:01 -0700 (PDT)
Received: by alrua-x1.borgediget.toke.dk (Postfix, from userid 1000)
 id DBFD41803A9; Tue, 15 Oct 2019 19:19:00 +0200 (CEST)
Subject: [PATCH v2 3/4] mac80211: Implement Airtime-based Queue Limit (AQL)
From: =?utf-8?q?Toke_H=C3=B8iland-J=C3=B8rgensen?= <toke@redhat.com>
To: Johannes Berg <johannes@sipsolutions.net>
Date: Tue, 15 Oct 2019 19:19:00 +0200
Message-ID: <157115994083.2500430.6570557769527791276.stgit@toke.dk>
In-Reply-To: <157115993755.2500430.12214017471129215800.stgit@toke.dk>
References: <157115993755.2500430.12214017471129215800.stgit@toke.dk>
User-Agent: StGit/0.20
MIME-Version: 1.0
X-MC-Unique: cLEWKKAANQSAj_tS1WEXPw-1
X-Mimecast-Spam-Score: 0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20191015_101908_670304_C4EA8853 
X-CRM114-Status: GOOD (  17.65  )
X-Spam-Score: -2.5 (--)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (-2.5 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -2.3 RCVD_IN_DNSWL_MED      RBL: Sender listed at https://www.dnswl.org/,
 medium trust [207.211.31.81 listed in list.dnswl.org]
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.0 SPF_PASS               SPF: sender matches SPF record
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
X-BeenThere: ath10k@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <ath10k.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/ath10k>,
 <mailto:ath10k-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/ath10k/>
List-Post: <mailto:ath10k@lists.infradead.org>
List-Help: <mailto:ath10k-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/ath10k>,
 <mailto:ath10k-request@lists.infradead.org?subject=subscribe>
Cc: Kan Yan <kyan@google.com>, Rajkumar Manoharan <rmanohar@codeaurora.org>,
 Kevin Hayes <kevinhayes@google.com>, make-wifi-fast@lists.bufferbloat.net,
 linux-wireless@vger.kernel.org, ath10k@lists.infradead.org,
 John Crispin <john@phrozen.org>, Lorenzo Bianconi <lorenzo@kernel.org>,
 Felix Fietkau <nbd@nbd.name>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "ath10k" <ath10k-bounces@lists.infradead.org>
Errors-To: ath10k-bounces+lists+ath10k=lfdr.de@lists.infradead.org

RnJvbTogS2FuIFlhbiA8a3lhbkBnb29nbGUuY29tPgoKSW4gb3JkZXIgZm9yIHRoZSBGcV9Db0Rl
bCBpbnRlZ3JhdGVkIGluIG1hYzgwMjExIGxheWVyIG9wZXJhdGVzIGVmZmVjdGl2ZWx5CnRvIGNv
bnRyb2wgZXhjZXNzaXZlIHF1ZXVlaW5nIGxhdGVuY3ksIHRoZSBDb0RlbCBhbGdvcml0aG0gcmVx
dWlyZXMgYW4KYWNjdXJhdGUgbWVhc3VyZSBvZiBob3cgbG9uZyB0aGUgcGFja2V0cyBzdGF5cyBp
biB0aGUgcXVldWUsIGFrYSBzb2pvdXJuCnRpbWUuIFRoZSBzb2pvdXJuIHRpbWUgbWVhc3VyZWQg
YXQgbWFjODAyMTEgbGF5ZXIgZG9lc24ndCBpbmNsdWRlIHF1ZXVlaW5nCmxhdGVuY3kgaW4gbG93
ZXIgbGF5ZXIgKGZpcm13YXJlL2hhcmR3YXJlKSBhbmQgQ29EZWwgZXhwZWN0cyBsb3dlciBsYXll
ciB0bwpoYXZlIGEgc2hvcnQgcXVldWUuIEhvd2V2ZXIsIG1vc3QgODAyLjExYWMgY2hpcHNldHMg
b2ZmbG9hZCB0YXNrcyBzdWNoIFRYCmFnZ3JlZ2F0aW9uIHRvIGZpcm13YXJlIG9yIGhhcmR3YXJl
LCB0aHVzIGhhdmUgYSBkZWVwIGxvd2VyIGxheWVyIHF1ZXVlLgpXaXRob3V0IGEgbWVjaGFuaXNt
IHRvIGNvbnRyb2wgdGhlIGxvd2VyIGxheWVyIHF1ZXVlIHNpemUsIHBhY2tldHMgb25seQpzdGF5
cyBpbiBtYWM4MDIxMSBsYXllciB0cmFuc2llbnRseSBiZWZvcmUgYmVpbmcgc2VudCB0byBmaXJt
d2FyZSBxdWV1ZS4KQXMgYSByZXN1bHQsIHRoZSBzb2pvdXJuIHRpbWUgbWVhc3VyZWQgYnkgQ29E
ZWwgaW4gdGhlIG1hYzgwMjExIGxheWVyIGlzCmFsbW9zdCBhbHdheXMgbG93ZXIgdGhhbiB0aGUg
Q29EZWwgbGF0ZW5jeSB0YXJnZXQsIGhlbmNlIENvRGVsIGRvZXMgbGl0dGxlCnRvIGNvbnRyb2wg
dGhlIGxhdGVuY3ksIGV2ZW4gd2hlbiB0aGUgbG93ZXIgbGF5ZXIgcXVldWUgY2F1c2VzIGV4Y2Vz
c2l2ZQpsYXRlbmN5LgoKQnl0ZSBRdWV1ZSBsaW1pdHMgKEJRTCkgaXMgY29tbW9ubHkgdXNlZCB0
byBhZGRyZXNzIHRoZSBzaW1pbGFyIGlzc3VlIHdpdGgKd2lyZWQgbmV0d29yayBpbnRlcmZhY2Uu
IEhvd2V2ZXIsIHRoaXMgbWV0aG9kIGNhbm5vdCBiZSBhcHBsaWVkIGRpcmVjdGx5CnRvIHRoZSB3
aXJlbGVzcyBuZXR3b3JrIGludGVyZmFjZS4gQnl0ZSBpcyBub3QgYSBzdWl0YWJsZSBtZWFzdXJl
IG9mIHF1ZXVlCmRlcHRoIGluIHRoZSB3aXJlbGVzcyBuZXR3b3JrLCBhcyB0aGUgZGF0YSByYXRl
IGNhbiB2YXJ5IGRyYW1hdGljYWxseSBmcm9tCnN0YXRpb24gdG8gc3RhdGlvbiBpbiB0aGUgc2Ft
ZSBuZXR3b3JrLCBmcm9tIGEgZmV3IE1icHMgdG8gb3ZlciBHYnBzLgoKVGhpcyBwYXRjaCBpbXBs
ZW1lbnRlZCBhbiBBaXJ0aW1lLWJhc2VkIFF1ZXVlIExpbWl0IChBUUwpIHRvIG1ha2UgQ29EZWwK
d29ya3MgZWZmZWN0aXZlbHkgd2l0aCB3aXJlbGVzcyBkcml2ZXJzIHRoYXQgdXRpbGl6ZWQgZmly
bXdhcmUvaGFyZHdhcmUKb2ZmbG9hZGluZy4gQVFMIG9ubHkgYWxsb3dzIGVhY2ggdHhxIHRvIHJl
bGVhc2UganVzdCBlbm91Z2ggcGFja2V0cyB0byB0aGUKbG93ZXIgbGF5ZXIgdG8gZm9ybSAxLTIg
bGFyZ2UgYWdncmVnYXRpb25zIHRvIGtlZXAgaGFyZHdhcmUgZnVsbHkgdXRpbGl6ZWQKYW5kIGtl
ZXAgdGhlIHJlc3Qgb2YgZnJhbWVzIGluIG1hYzgwMjExIGxheWVyIHRvIGJlIGNvbnRyb2xsZWQg
YnkgdGhlIENvRGVsCmFsZ29yaXRobS4KClNpZ25lZC1vZmYtYnk6IEthbiBZYW4gPGt5YW5AZ29v
Z2xlLmNvbT4KWyBUb2tlOiBHZXQgcmlkIG9mIHRoZSBkcml2ZXIgQVBJIHRvIHNldCBwZW5kaW5n
IGFpcnRpbWUgXQpTaWduZWQtb2ZmLWJ5OiBUb2tlIEjDuGlsYW5kLUrDuHJnZW5zZW4gPHRva2VA
cmVkaGF0LmNvbT4KLS0tCiBpbmNsdWRlL25ldC9jZmc4MDIxMS5oICAgICB8ICAgIDcgKysrKwog
aW5jbHVkZS9uZXQvbWFjODAyMTEuaCAgICAgfCAgIDEyICsrKysrKysKIG5ldC9tYWM4MDIxMS9k
ZWJ1Z2ZzLmMgICAgIHwgICA3OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKwogbmV0L21hYzgwMjExL2RlYnVnZnNfc3RhLmMgfCAgIDQzICsrKysrKysrKysrKysr
KysrKystLS0tLQogbmV0L21hYzgwMjExL2llZWU4MDIxMV9pLmggfCAgICA0ICsrCiBuZXQvbWFj
ODAyMTEvbWFpbi5jICAgICAgICB8ICAgIDkgKysrKysKIG5ldC9tYWM4MDIxMS9zdGFfaW5mby5j
ICAgIHwgICAzMiArKysrKysrKysrKysrKysrKysKIG5ldC9tYWM4MDIxMS9zdGFfaW5mby5oICAg
IHwgICAgOCArKysrKwogbmV0L21hYzgwMjExL3R4LmMgICAgICAgICAgfCAgIDQ2ICsrKysrKysr
KysrKysrKysrKysrKysrKy0tCiA5IGZpbGVzIGNoYW5nZWQsIDIyNSBpbnNlcnRpb25zKCspLCAx
NCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9pbmNsdWRlL25ldC9jZmc4MDIxMS5oIGIvaW5j
bHVkZS9uZXQvY2ZnODAyMTEuaAppbmRleCBmZjQ1YzNlMWFiZmYuLjhkNTBjMGE2MGRiZCAxMDA2
NDQKLS0tIGEvaW5jbHVkZS9uZXQvY2ZnODAyMTEuaAorKysgYi9pbmNsdWRlL25ldC9jZmc4MDIx
MS5oCkBAIC0yNjAyLDYgKzI2MDIsMTMgQEAgZW51bSB3aXBoeV9wYXJhbXNfZmxhZ3MgewogCiAj
ZGVmaW5lIElFRUU4MDIxMV9ERUZBVUxUX0FJUlRJTUVfV0VJR0hUCTI1NgogCisvKiBUaGUgcGVy
IFRYUSBkZXZpY2UgcXVldWUgbGltaXQgaW4gYWlydGltZSAqLworI2RlZmluZSBJRUVFODAyMTFf
REVGQVVMVF9BUUxfVFhRX0xJTUlUX0wJNDAwMAorI2RlZmluZSBJRUVFODAyMTFfREVGQVVMVF9B
UUxfVFhRX0xJTUlUX0gJODAwMAorCisvKiBUaGUgcGVyIGludGVyZmFjZSBhaXJ0aW1lIHRocmVz
aG9sZCB0byBzd2l0Y2ggdG8gbG93ZXIgcXVldWUgbGltaXQgKi8KKyNkZWZpbmUgSUVFRTgwMjEx
X0FRTF9USFJFU0hPTEQJCQkyNDAwMAorCiAvKioKICAqIHN0cnVjdCBjZmc4MDIxMV9wbWtzYSAt
IFBNSyBTZWN1cml0eSBBc3NvY2lhdGlvbgogICoKZGlmZiAtLWdpdCBhL2luY2x1ZGUvbmV0L21h
YzgwMjExLmggYi9pbmNsdWRlL25ldC9tYWM4MDIxMS5oCmluZGV4IDc2MTllYjc0ZDYxMi4uYjU3
MjdhMjA3NTRjIDEwMDY0NAotLS0gYS9pbmNsdWRlL25ldC9tYWM4MDIxMS5oCisrKyBiL2luY2x1
ZGUvbmV0L21hYzgwMjExLmgKQEAgLTU1NzUsNiArNTU3NSwxOCBAQCB2b2lkIGllZWU4MDIxMV9z
ZW5kX2Vvc3BfbnVsbGZ1bmMoc3RydWN0IGllZWU4MDIxMV9zdGEgKnB1YnN0YSwgaW50IHRpZCk7
CiB2b2lkIGllZWU4MDIxMV9zdGFfcmVnaXN0ZXJfYWlydGltZShzdHJ1Y3QgaWVlZTgwMjExX3N0
YSAqcHVic3RhLCB1OCB0aWQsCiAJCQkJICAgIHUzMiB0eF9haXJ0aW1lLCB1MzIgcnhfYWlydGlt
ZSk7CiAKKy8qKgorICogaWVlZTgwMjExX3R4cV9haXJ0aW1lX2NoZWNrIC0gY2hlY2sgaWYgYSB0
eHEgY2FuIHNlbmQgZnJhbWUgdG8gZGV2aWNlCisgKgorICogQGh3OiBwb2ludGVyIG9idGFpbmVk
IGZyb20gaWVlZTgwMjExX2FsbG9jX2h3KCkKKyAqIEB0eHE6IHBvaW50ZXIgb2J0YWluZWQgZnJv
bSBzdGF0aW9uIG9yIHZpcnR1YWwgaW50ZXJmYWNlCisgKgorICogUmV0dXJuIHRydWUgaWYgdGhl
IEFRTCdzIGFpcnRpbWUgbGltaXQgaGFzIG5vdCBiZWVuIHJlYWNoZWQgYW5kIHRoZSB0eHEgY2Fu
CisgKiBjb250aW51ZSB0byBzZW5kIG1vcmUgcGFja2V0cyB0byB0aGUgZGV2aWNlLiBPdGhlcndp
c2UgcmV0dXJuIGZhbHNlLgorICovCitib29sCitpZWVlODAyMTFfdHhxX2FpcnRpbWVfY2hlY2so
c3RydWN0IGllZWU4MDIxMV9odyAqaHcsIHN0cnVjdCBpZWVlODAyMTFfdHhxICp0eHEpOworCiAv
KioKICAqIGllZWU4MDIxMV9pdGVyX2tleXMgLSBpdGVyYXRlIGtleXMgcHJvZ3JhbW1lZCBpbnRv
IHRoZSBkZXZpY2UKICAqIEBodzogcG9pbnRlciBvYnRhaW5lZCBmcm9tIGllZWU4MDIxMV9hbGxv
Y19odygpCmRpZmYgLS1naXQgYS9uZXQvbWFjODAyMTEvZGVidWdmcy5jIGIvbmV0L21hYzgwMjEx
L2RlYnVnZnMuYwppbmRleCA1NjhiM2IyNzY5MzEuLmQ3N2VhMGU1MWMxZCAxMDA2NDQKLS0tIGEv
bmV0L21hYzgwMjExL2RlYnVnZnMuYworKysgYi9uZXQvbWFjODAyMTEvZGVidWdmcy5jCkBAIC0x
NDgsNiArMTQ4LDgwIEBAIHN0YXRpYyBjb25zdCBzdHJ1Y3QgZmlsZV9vcGVyYXRpb25zIGFxbV9v
cHMgPSB7CiAJLmxsc2VlayA9IGRlZmF1bHRfbGxzZWVrLAogfTsKIAorc3RhdGljIHNzaXplX3Qg
YXFsX3R4cV9saW1pdF9yZWFkKHN0cnVjdCBmaWxlICpmaWxlLAorCQkJCSAgY2hhciBfX3VzZXIg
KnVzZXJfYnVmLAorCQkJCSAgc2l6ZV90IGNvdW50LAorCQkJCSAgbG9mZl90ICpwcG9zKQorewor
CXN0cnVjdCBpZWVlODAyMTFfbG9jYWwgKmxvY2FsID0gZmlsZS0+cHJpdmF0ZV9kYXRhOworCWNo
YXIgYnVmWzQwMF07CisJaW50IGxlbiA9IDA7CisKKwlsZW4gPSBzY25wcmludGYoYnVmLCBzaXpl
b2YoYnVmKSwKKwkJCSJBQwlBUUwgbGltaXQgbG93CUFRTCBsaW1pdCBoaWdoXG4iCisJCQkiVk8J
JXUJCSV1XG4iCisJCQkiVkkJJXUJCSV1XG4iCisJCQkiQkUJJXUJCSV1XG4iCisJCQkiQksJJXUJ
CSV1XG4iLAorCQkJbG9jYWwtPmFxbF90eHFfbGltaXRfbG93W0lFRUU4MDIxMV9BQ19WT10sCisJ
CQlsb2NhbC0+YXFsX3R4cV9saW1pdF9oaWdoW0lFRUU4MDIxMV9BQ19WT10sCisJCQlsb2NhbC0+
YXFsX3R4cV9saW1pdF9sb3dbSUVFRTgwMjExX0FDX1ZJXSwKKwkJCWxvY2FsLT5hcWxfdHhxX2xp
bWl0X2hpZ2hbSUVFRTgwMjExX0FDX1ZJXSwKKwkJCWxvY2FsLT5hcWxfdHhxX2xpbWl0X2xvd1tJ
RUVFODAyMTFfQUNfQkVdLAorCQkJbG9jYWwtPmFxbF90eHFfbGltaXRfaGlnaFtJRUVFODAyMTFf
QUNfQkVdLAorCQkJbG9jYWwtPmFxbF90eHFfbGltaXRfbG93W0lFRUU4MDIxMV9BQ19CS10sCisJ
CQlsb2NhbC0+YXFsX3R4cV9saW1pdF9oaWdoW0lFRUU4MDIxMV9BQ19CS10pOworCXJldHVybiBz
aW1wbGVfcmVhZF9mcm9tX2J1ZmZlcih1c2VyX2J1ZiwgY291bnQsIHBwb3MsCisJCQkJICAgICAg
IGJ1ZiwgbGVuKTsKK30KKworc3RhdGljIHNzaXplX3QgYXFsX3R4cV9saW1pdF93cml0ZShzdHJ1
Y3QgZmlsZSAqZmlsZSwKKwkJCQkgICBjb25zdCBjaGFyIF9fdXNlciAqdXNlcl9idWYsCisJCQkJ
ICAgc2l6ZV90IGNvdW50LAorCQkJCSAgIGxvZmZfdCAqcHBvcykKK3sKKwlzdHJ1Y3QgaWVlZTgw
MjExX2xvY2FsICpsb2NhbCA9IGZpbGUtPnByaXZhdGVfZGF0YTsKKwljaGFyIGJ1ZlsxMDBdOwor
CXNpemVfdCBsZW47CisJdTMyIGFjLCBxX2xpbWl0X2xvdywgcV9saW1pdF9oaWdoOworCXN0cnVj
dCBzdGFfaW5mbyAqc3RhOworCisJaWYgKGNvdW50ID4gc2l6ZW9mKGJ1ZikpCisJCXJldHVybiAt
RUlOVkFMOworCisJaWYgKGNvcHlfZnJvbV91c2VyKGJ1ZiwgdXNlcl9idWYsIGNvdW50KSkKKwkJ
cmV0dXJuIC1FRkFVTFQ7CisKKwlidWZbc2l6ZW9mKGJ1ZikgLSAxXSA9IDA7CisJbGVuID0gc3Ry
bGVuKGJ1Zik7CisJaWYgKGxlbiA+IDAgJiYgYnVmW2xlbiAtIDFdID09ICdcbicpCisJCWJ1Zlts
ZW4gLSAxXSA9IDA7CisKKwlpZiAoc3NjYW5mKGJ1ZiwgIiV1ICV1ICV1IiwgJmFjLCAmcV9saW1p
dF9sb3csICZxX2xpbWl0X2hpZ2gpICE9IDMpCisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKGFj
ID49IElFRUU4MDIxMV9OVU1fQUNTKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWxvY2FsLT5hcWxf
dHhxX2xpbWl0X2xvd1thY10gPSBxX2xpbWl0X2xvdzsKKwlsb2NhbC0+YXFsX3R4cV9saW1pdF9o
aWdoW2FjXSA9IHFfbGltaXRfaGlnaDsKKworCW11dGV4X2xvY2soJmxvY2FsLT5zdGFfbXR4KTsK
KwlsaXN0X2Zvcl9lYWNoX2VudHJ5KHN0YSwgJmxvY2FsLT5zdGFfbGlzdCwgbGlzdCkgeworCQlz
dGEtPmFpcnRpbWVbYWNdLmFxbF9saW1pdF9sb3cgPSBxX2xpbWl0X2xvdzsKKwkJc3RhLT5haXJ0
aW1lW2FjXS5hcWxfbGltaXRfaGlnaCA9IHFfbGltaXRfaGlnaDsKKwl9CisJbXV0ZXhfdW5sb2Nr
KCZsb2NhbC0+c3RhX210eCk7CisJcmV0dXJuIGNvdW50OworfQorCitzdGF0aWMgY29uc3Qgc3Ry
dWN0IGZpbGVfb3BlcmF0aW9ucyBhcWxfdHhxX2xpbWl0X29wcyA9IHsKKwkud3JpdGUgPSBhcWxf
dHhxX2xpbWl0X3dyaXRlLAorCS5yZWFkID0gYXFsX3R4cV9saW1pdF9yZWFkLAorCS5vcGVuID0g
c2ltcGxlX29wZW4sCisJLmxsc2VlayA9IGRlZmF1bHRfbGxzZWVrLAorfTsKKwogc3RhdGljIHNz
aXplX3QgZm9yY2VfdHhfc3RhdHVzX3JlYWQoc3RydWN0IGZpbGUgKmZpbGUsCiAJCQkJICAgIGNo
YXIgX191c2VyICp1c2VyX2J1ZiwKIAkJCQkgICAgc2l6ZV90IGNvdW50LApAQCAtNDQxLDYgKzUx
NSwxMCBAQCB2b2lkIGRlYnVnZnNfaHdfYWRkKHN0cnVjdCBpZWVlODAyMTFfbG9jYWwgKmxvY2Fs
KQogCWRlYnVnZnNfY3JlYXRlX3UxNigiYWlydGltZV9mbGFncyIsIDA2MDAsCiAJCQkgICBwaHlk
LCAmbG9jYWwtPmFpcnRpbWVfZmxhZ3MpOwogCisJREVCVUdGU19BREQoYXFsX3R4cV9saW1pdCk7
CisJZGVidWdmc19jcmVhdGVfdTMyKCJhcWxfdGhyZXNob2xkIiwgMDYwMCwKKwkJCSAgIHBoeWQs
ICZsb2NhbC0+YXFsX3RocmVzaG9sZCk7CisKIAlzdGF0c2QgPSBkZWJ1Z2ZzX2NyZWF0ZV9kaXIo
InN0YXRpc3RpY3MiLCBwaHlkKTsKIAogCS8qIGlmIHRoZSBkaXIgZmFpbGVkLCBkb24ndCBwdXQg
YWxsIHRoZSBvdGhlciB0aGluZ3MgaW50byB0aGUgcm9vdCEgKi8KZGlmZiAtLWdpdCBhL25ldC9t
YWM4MDIxMS9kZWJ1Z2ZzX3N0YS5jIGIvbmV0L21hYzgwMjExL2RlYnVnZnNfc3RhLmMKaW5kZXgg
YzhhZDIwYzI4YzQzLi45ZjliOGY1ZWQ4NmEgMTAwNjQ0Ci0tLSBhL25ldC9tYWM4MDIxMS9kZWJ1
Z2ZzX3N0YS5jCisrKyBiL25ldC9tYWM4MDIxMS9kZWJ1Z2ZzX3N0YS5jCkBAIC0xOTcsMTAgKzE5
NywxMiBAQCBzdGF0aWMgc3NpemVfdCBzdGFfYWlydGltZV9yZWFkKHN0cnVjdCBmaWxlICpmaWxl
LCBjaGFyIF9fdXNlciAqdXNlcmJ1ZiwKIHsKIAlzdHJ1Y3Qgc3RhX2luZm8gKnN0YSA9IGZpbGUt
PnByaXZhdGVfZGF0YTsKIAlzdHJ1Y3QgaWVlZTgwMjExX2xvY2FsICpsb2NhbCA9IHN0YS0+c2Rh
dGEtPmxvY2FsOwotCXNpemVfdCBidWZzeiA9IDIwMDsKKwlzaXplX3QgYnVmc3ogPSA0MDA7CiAJ
Y2hhciAqYnVmID0ga3phbGxvYyhidWZzeiwgR0ZQX0tFUk5FTCksICpwID0gYnVmOwogCXU2NCBy
eF9haXJ0aW1lID0gMCwgdHhfYWlydGltZSA9IDA7CiAJczY0IGRlZmljaXRbSUVFRTgwMjExX05V
TV9BQ1NdOworCXUzMiBxX2RlcHRoW0lFRUU4MDIxMV9OVU1fQUNTXTsKKwl1MzIgcV9saW1pdF9s
W0lFRUU4MDIxMV9OVU1fQUNTXSwgcV9saW1pdF9oW0lFRUU4MDIxMV9OVU1fQUNTXTsKIAlzc2l6
ZV90IHJ2OwogCWludCBhYzsKIApAQCAtMjEyLDE5ICsyMTQsMjIgQEAgc3RhdGljIHNzaXplX3Qg
c3RhX2FpcnRpbWVfcmVhZChzdHJ1Y3QgZmlsZSAqZmlsZSwgY2hhciBfX3VzZXIgKnVzZXJidWYs
CiAJCXJ4X2FpcnRpbWUgKz0gc3RhLT5haXJ0aW1lW2FjXS5yeF9haXJ0aW1lOwogCQl0eF9haXJ0
aW1lICs9IHN0YS0+YWlydGltZVthY10udHhfYWlydGltZTsKIAkJZGVmaWNpdFthY10gPSBzdGEt
PmFpcnRpbWVbYWNdLmRlZmljaXQ7CisJCXFfbGltaXRfbFthY10gPSBzdGEtPmFpcnRpbWVbYWNd
LmFxbF9saW1pdF9sb3c7CisJCXFfbGltaXRfaFthY10gPSBzdGEtPmFpcnRpbWVbYWNdLmFxbF9s
aW1pdF9oaWdoOworCQlxX2RlcHRoW2FjXSA9IHN0YS0+YWlydGltZVthY10uYXFsX3R4X3BlbmRp
bmc7CiAJCXNwaW5fdW5sb2NrX2JoKCZsb2NhbC0+YWN0aXZlX3R4cV9sb2NrW2FjXSk7CiAJfQog
CiAJcCArPSBzY25wcmludGYocCwgYnVmc3ogKyBidWYgLSBwLAogCQkiUlg6ICVsbHUgdXNcblRY
OiAlbGx1IHVzXG5XZWlnaHQ6ICV1XG4iCi0JCSJEZWZpY2l0OiBWTzogJWxsZCB1cyBWSTogJWxs
ZCB1cyBCRTogJWxsZCB1cyBCSzogJWxsZCB1c1xuIiwKLQkJcnhfYWlydGltZSwKLQkJdHhfYWly
dGltZSwKLQkJc3RhLT5haXJ0aW1lX3dlaWdodCwKLQkJZGVmaWNpdFswXSwKLQkJZGVmaWNpdFsx
XSwKLQkJZGVmaWNpdFsyXSwKLQkJZGVmaWNpdFszXSk7CisJCSJEZWZpY2l0OiBWTzogJWxsZCB1
cyBWSTogJWxsZCB1cyBCRTogJWxsZCB1cyBCSzogJWxsZCB1c1xuIgorCQkiUSBkZXB0aDogVk86
ICV1IHVzIFZJOiAldSB1cyBCRTogJXUgdXMgQks6ICV1IHVzXG4iCisJCSJRIGxpbWl0W2xvdy9o
aWdoXTogVk86ICV1LyV1IFZJOiAldS8ldSBCRTogJXUvJXUgQks6ICV1LyV1XG4iLAorCQlyeF9h
aXJ0aW1lLCB0eF9haXJ0aW1lLCBzdGEtPmFpcnRpbWVfd2VpZ2h0LAorCQlkZWZpY2l0WzBdLCBk
ZWZpY2l0WzFdLCBkZWZpY2l0WzJdLCBkZWZpY2l0WzNdLAorCQlxX2RlcHRoWzBdLCBxX2RlcHRo
WzFdLCBxX2RlcHRoWzJdLCBxX2RlcHRoWzNdLAorCQlxX2xpbWl0X2xbMF0sIHFfbGltaXRfaFsw
XSwgcV9saW1pdF9sWzFdLCBxX2xpbWl0X2hbMV0sCisJCXFfbGltaXRfbFsyXSwgcV9saW1pdF9o
WzJdLCBxX2xpbWl0X2xbM10sIHFfbGltaXRfaFszXSksCiAKIAlydiA9IHNpbXBsZV9yZWFkX2Zy
b21fYnVmZmVyKHVzZXJidWYsIGNvdW50LCBwcG9zLCBidWYsIHAgLSBidWYpOwogCWtmcmVlKGJ1
Zik7CkBAIC0yMzYsNyArMjQxLDI1IEBAIHN0YXRpYyBzc2l6ZV90IHN0YV9haXJ0aW1lX3dyaXRl
KHN0cnVjdCBmaWxlICpmaWxlLCBjb25zdCBjaGFyIF9fdXNlciAqdXNlcmJ1ZiwKIHsKIAlzdHJ1
Y3Qgc3RhX2luZm8gKnN0YSA9IGZpbGUtPnByaXZhdGVfZGF0YTsKIAlzdHJ1Y3QgaWVlZTgwMjEx
X2xvY2FsICpsb2NhbCA9IHN0YS0+c2RhdGEtPmxvY2FsOwotCWludCBhYzsKKwl1MzIgYWMsIHFf
bGltaXRfbCwgcV9saW1pdF9oOworCWNoYXIgX2J1ZlsxMDBdID0ge30sICpidWYgPSBfYnVmOwor
CisJaWYgKGNvdW50ID4gc2l6ZW9mKF9idWYpKQorCQlyZXR1cm4gLUVJTlZBTDsKKworCWlmIChj
b3B5X2Zyb21fdXNlcihidWYsIHVzZXJidWYsIGNvdW50KSkKKwkJcmV0dXJuIC1FRkFVTFQ7CisK
KwlidWZbc2l6ZW9mKF9idWYpIC0gMV0gPSAnXDAnOworCWlmIChzc2NhbmYoYnVmLCAicXVldWUg
bGltaXQgJXUgJXUgJXUiLCAmYWMsICZxX2xpbWl0X2wsICZxX2xpbWl0X2gpCisJICAgICE9IDMp
CisJCXJldHVybiAtRUlOVkFMOworCisJaWYgKGFjID49IElFRUU4MDIxMV9OVU1fQUNTKQorCQly
ZXR1cm4gLUVJTlZBTDsKKworCXN0YS0+YWlydGltZVthY10uYXFsX2xpbWl0X2xvdyA9IHFfbGlt
aXRfbDsKKwlzdGEtPmFpcnRpbWVbYWNdLmFxbF9saW1pdF9oaWdoID0gcV9saW1pdF9oOwogCiAJ
Zm9yIChhYyA9IDA7IGFjIDwgSUVFRTgwMjExX05VTV9BQ1M7IGFjKyspIHsKIAkJc3Bpbl9sb2Nr
X2JoKCZsb2NhbC0+YWN0aXZlX3R4cV9sb2NrW2FjXSk7CmRpZmYgLS1naXQgYS9uZXQvbWFjODAy
MTEvaWVlZTgwMjExX2kuaCBiL25ldC9tYWM4MDIxMS9pZWVlODAyMTFfaS5oCmluZGV4IDIyNWVh
NGUzY2Q3Ni4uNmZhNjkwNzU3Mzg4IDEwMDY0NAotLS0gYS9uZXQvbWFjODAyMTEvaWVlZTgwMjEx
X2kuaAorKysgYi9uZXQvbWFjODAyMTEvaWVlZTgwMjExX2kuaApAQCAtMTE0Miw2ICsxMTQyLDEw
IEBAIHN0cnVjdCBpZWVlODAyMTFfbG9jYWwgewogCXUxNiBzY2hlZHVsZV9yb3VuZFtJRUVFODAy
MTFfTlVNX0FDU107CiAKIAl1MTYgYWlydGltZV9mbGFnczsKKwl1MzIgYXFsX3R4cV9saW1pdF9s
b3dbSUVFRTgwMjExX05VTV9BQ1NdOworCXUzMiBhcWxfdHhxX2xpbWl0X2hpZ2hbSUVFRTgwMjEx
X05VTV9BQ1NdOworCXUzMiBhcWxfdGhyZXNob2xkOworCXUzMiBhcWxfdG90YWxfcGVuZGluZ19h
aXJ0aW1lOwogCiAJY29uc3Qgc3RydWN0IGllZWU4MDIxMV9vcHMgKm9wczsKIApkaWZmIC0tZ2l0
IGEvbmV0L21hYzgwMjExL21haW4uYyBiL25ldC9tYWM4MDIxMS9tYWluLmMKaW5kZXggYWJhMDk0
YjRjY2ZjLi4wNzkyYzliOWM4NTAgMTAwNjQ0Ci0tLSBhL25ldC9tYWM4MDIxMS9tYWluLmMKKysr
IGIvbmV0L21hYzgwMjExL21haW4uYwpAQCAtNjY3LDggKzY2NywxNSBAQCBzdHJ1Y3QgaWVlZTgw
MjExX2h3ICppZWVlODAyMTFfYWxsb2NfaHdfbm0oc2l6ZV90IHByaXZfZGF0YV9sZW4sCiAJZm9y
IChpID0gMDsgaSA8IElFRUU4MDIxMV9OVU1fQUNTOyBpKyspIHsKIAkJSU5JVF9MSVNUX0hFQUQo
JmxvY2FsLT5hY3RpdmVfdHhxc1tpXSk7CiAJCXNwaW5fbG9ja19pbml0KCZsb2NhbC0+YWN0aXZl
X3R4cV9sb2NrW2ldKTsKKwkJbG9jYWwtPmFxbF90eHFfbGltaXRfbG93W2ldID0gSUVFRTgwMjEx
X0RFRkFVTFRfQVFMX1RYUV9MSU1JVF9MOworCQlsb2NhbC0+YXFsX3R4cV9saW1pdF9oaWdoW2ld
ID0KKwkJCUlFRUU4MDIxMV9ERUZBVUxUX0FRTF9UWFFfTElNSVRfSDsKIAl9Ci0JbG9jYWwtPmFp
cnRpbWVfZmxhZ3MgPSBBSVJUSU1FX1VTRV9UWCB8IEFJUlRJTUVfVVNFX1JYOworCisJbG9jYWwt
PmFpcnRpbWVfZmxhZ3MgPSBBSVJUSU1FX1VTRV9UWCB8CisJCQkgICAgICAgQUlSVElNRV9VU0Vf
UlggfAorCQkJICAgICAgIEFJUlRJTUVfVVNFX0FRTDsKKwlsb2NhbC0+YXFsX3RocmVzaG9sZCA9
IElFRUU4MDIxMV9BUUxfVEhSRVNIT0xEOwogCiAJSU5JVF9MSVNUX0hFQUQoJmxvY2FsLT5jaGFu
Y3R4X2xpc3QpOwogCW11dGV4X2luaXQoJmxvY2FsLT5jaGFuY3R4X210eCk7CmRpZmYgLS1naXQg
YS9uZXQvbWFjODAyMTEvc3RhX2luZm8uYyBiL25ldC9tYWM4MDIxMS9zdGFfaW5mby5jCmluZGV4
IGJkMTFmZWYyMTM5Zi4uNjRiYWNmNGYwNjhjIDEwMDY0NAotLS0gYS9uZXQvbWFjODAyMTEvc3Rh
X2luZm8uYworKysgYi9uZXQvbWFjODAyMTEvc3RhX2luZm8uYwpAQCAtMzk2LDYgKzM5Niw5IEBA
IHN0cnVjdCBzdGFfaW5mbyAqc3RhX2luZm9fYWxsb2Moc3RydWN0IGllZWU4MDIxMV9zdWJfaWZf
ZGF0YSAqc2RhdGEsCiAJCXNrYl9xdWV1ZV9oZWFkX2luaXQoJnN0YS0+cHNfdHhfYnVmW2ldKTsK
IAkJc2tiX3F1ZXVlX2hlYWRfaW5pdCgmc3RhLT50eF9maWx0ZXJlZFtpXSk7CiAJCXN0YS0+YWly
dGltZVtpXS5kZWZpY2l0ID0gc3RhLT5haXJ0aW1lX3dlaWdodDsKKwkJc3RhLT5haXJ0aW1lW2ld
LmFxbF90eF9wZW5kaW5nID0gMDsKKwkJc3RhLT5haXJ0aW1lW2ldLmFxbF9saW1pdF9sb3cgPSBs
b2NhbC0+YXFsX3R4cV9saW1pdF9sb3dbaV07CisJCXN0YS0+YWlydGltZVtpXS5hcWxfbGltaXRf
aGlnaCA9IGxvY2FsLT5hcWxfdHhxX2xpbWl0X2hpZ2hbaV07CiAJfQogCiAJZm9yIChpID0gMDsg
aSA8IElFRUU4MDIxMV9OVU1fVElEUzsgaSsrKQpAQCAtMTg5Myw2ICsxODk2LDM1IEBAIHZvaWQg
aWVlZTgwMjExX3N0YV9yZWdpc3Rlcl9haXJ0aW1lKHN0cnVjdCBpZWVlODAyMTFfc3RhICpwdWJz
dGEsIHU4IHRpZCwKIH0KIEVYUE9SVF9TWU1CT0woaWVlZTgwMjExX3N0YV9yZWdpc3Rlcl9haXJ0
aW1lKTsKIAordm9pZCBpZWVlODAyMTFfc3RhX3VwZGF0ZV9wZW5kaW5nX2FpcnRpbWUoc3RydWN0
IGllZWU4MDIxMV9sb2NhbCAqbG9jYWwsCisJCQkJCSAgc3RydWN0IHN0YV9pbmZvICpzdGEsIHU4
IGFjLAorCQkJCQkgIHUxNiB0eF9haXJ0aW1lLCBib29sIHR4X2NvbXBsZXRlZCkKK3sKKwlzcGlu
X2xvY2tfYmgoJmxvY2FsLT5hY3RpdmVfdHhxX2xvY2tbYWNdKTsKKwlpZiAodHhfY29tcGxldGVk
KSB7CisJCWlmIChzdGEpIHsKKwkJCWlmIChXQVJOX09OQ0Uoc3RhLT5haXJ0aW1lW2FjXS5hcWxf
dHhfcGVuZGluZyA8IHR4X2FpcnRpbWUsCisJCQkJICAgICAgIlRYUSBwZW5kaW5nIGFpcnRpbWUg
dW5kZXJmbG93OiAldSwgJXUiLAorCQkJCSAgICAgIHN0YS0+YWlydGltZVthY10uYXFsX3R4X3Bl
bmRpbmcsIHR4X2FpcnRpbWUpKQorCQkJCXN0YS0+YWlydGltZVthY10uYXFsX3R4X3BlbmRpbmcg
PSAwOworCQkJZWxzZQorCQkJCXN0YS0+YWlydGltZVthY10uYXFsX3R4X3BlbmRpbmcgLT0gdHhf
YWlydGltZTsKKwkJfQorCisJCWlmIChXQVJOX09OQ0UobG9jYWwtPmFxbF90b3RhbF9wZW5kaW5n
X2FpcnRpbWUgPCB0eF9haXJ0aW1lLAorCQkJICAgICAgIkRldmljZSBwZW5kaW5nIGFpcnRpbWUg
dW5kZXJmbG93OiAldSwgJXUiLAorCQkJICAgICAgbG9jYWwtPmFxbF90b3RhbF9wZW5kaW5nX2Fp
cnRpbWUsIHR4X2FpcnRpbWUpKQorCQkJbG9jYWwtPmFxbF90b3RhbF9wZW5kaW5nX2FpcnRpbWUg
PSAwOworCQllbHNlCisJCQlsb2NhbC0+YXFsX3RvdGFsX3BlbmRpbmdfYWlydGltZSAtPSB0eF9h
aXJ0aW1lOworCX0gZWxzZSB7CisJCWlmIChzdGEpCisJCQlzdGEtPmFpcnRpbWVbYWNdLmFxbF90
eF9wZW5kaW5nICs9IHR4X2FpcnRpbWU7CisJCWxvY2FsLT5hcWxfdG90YWxfcGVuZGluZ19haXJ0
aW1lICs9IHR4X2FpcnRpbWU7CisJfQorCXNwaW5fdW5sb2NrX2JoKCZsb2NhbC0+YWN0aXZlX3R4
cV9sb2NrW2FjXSk7Cit9CisKIGludCBzdGFfaW5mb19tb3ZlX3N0YXRlKHN0cnVjdCBzdGFfaW5m
byAqc3RhLAogCQkJZW51bSBpZWVlODAyMTFfc3RhX3N0YXRlIG5ld19zdGF0ZSkKIHsKZGlmZiAt
LWdpdCBhL25ldC9tYWM4MDIxMS9zdGFfaW5mby5oIGIvbmV0L21hYzgwMjExL3N0YV9pbmZvLmgK
aW5kZXggMzY5YzJkZGRjZTUyLi40ZTRkNzZlODFiMGYgMTAwNjQ0Ci0tLSBhL25ldC9tYWM4MDIx
MS9zdGFfaW5mby5oCisrKyBiL25ldC9tYWM4MDIxMS9zdGFfaW5mby5oCkBAIC0xMjcsMTMgKzEy
NywyMSBAQCBlbnVtIGllZWU4MDIxMV9hZ2dfc3RvcF9yZWFzb24gewogLyogRGVidWdmcyBmbGFn
cyB0byBlbmFibGUvZGlzYWJsZSB1c2Ugb2YgUlgvVFggYWlydGltZSBpbiBzY2hlZHVsZXIgKi8K
ICNkZWZpbmUgQUlSVElNRV9VU0VfVFgJCUJJVCgwKQogI2RlZmluZSBBSVJUSU1FX1VTRV9SWAkJ
QklUKDEpCisjZGVmaW5lIEFJUlRJTUVfVVNFX0FRTAkJQklUKDIpCiAKIHN0cnVjdCBhaXJ0aW1l
X2luZm8gewogCXU2NCByeF9haXJ0aW1lOwogCXU2NCB0eF9haXJ0aW1lOwogCXM2NCBkZWZpY2l0
OworCXUzMiBhcWxfdHhfcGVuZGluZzsgLyogRXN0aW1hdGVkIGFpcnRpbWUgZm9yIGZyYW1lcyBw
ZW5kaW5nIGluIHF1ZXVlICovCisJdTMyIGFxbF9saW1pdF9sb3c7CisJdTMyIGFxbF9saW1pdF9o
aWdoOwogfTsKIAordm9pZCBpZWVlODAyMTFfc3RhX3VwZGF0ZV9wZW5kaW5nX2FpcnRpbWUoc3Ry
dWN0IGllZWU4MDIxMV9sb2NhbCAqbG9jYWwsCisJCQkJCSAgc3RydWN0IHN0YV9pbmZvICpzdGEs
IHU4IGFjLAorCQkJCQkgIHUxNiB0eF9haXJ0aW1lLCBib29sIHR4X2NvbXBsZXRlZCk7CisKIHN0
cnVjdCBzdGFfaW5mbzsKIAogLyoqCmRpZmYgLS1naXQgYS9uZXQvbWFjODAyMTEvdHguYyBiL25l
dC9tYWM4MDIxMS90eC5jCmluZGV4IDkzOGMxMGY3OTU1Yi4uNDA1ZjYyMmIzZmUwIDEwMDY0NAot
LS0gYS9uZXQvbWFjODAyMTEvdHguYworKysgYi9uZXQvbWFjODAyMTEvdHguYwpAQCAtMzY2NSw3
ICszNjY1LDggQEAgc3RydWN0IGllZWU4MDIxMV90eHEgKmllZWU4MDIxMV9uZXh0X3R4cShzdHJ1
Y3QgaWVlZTgwMjExX2h3ICpodywgdTggYWMpCiB7CiAJc3RydWN0IGllZWU4MDIxMV9sb2NhbCAq
bG9jYWwgPSBod190b19sb2NhbChodyk7CiAJc3RydWN0IGllZWU4MDIxMV90eHEgKnJldCA9IE5V
TEw7Ci0Jc3RydWN0IHR4cV9pbmZvICp0eHFpID0gTlVMTDsKKwlzdHJ1Y3QgdHhxX2luZm8gKnR4
cWkgPSBOVUxMLCAqaGVhZCA9IE5VTEw7CisJYm9vbCBmb3VuZF9lbGlnaWJsZV90eHEgPSBmYWxz
ZTsKIAogCXNwaW5fbG9ja19iaCgmbG9jYWwtPmFjdGl2ZV90eHFfbG9ja1thY10pOwogCkBAIC0z
Njc2LDEzICszNjc3LDI2IEBAIHN0cnVjdCBpZWVlODAyMTFfdHhxICppZWVlODAyMTFfbmV4dF90
eHEoc3RydWN0IGllZWU4MDIxMV9odyAqaHcsIHU4IGFjKQogCWlmICghdHhxaSkKIAkJZ290byBv
dXQ7CiAKKwlpZiAodHhxaSA9PSBoZWFkICYmICFmb3VuZF9lbGlnaWJsZV90eHEpCisJCWdvdG8g
b3V0OworCisJaWYgKCFoZWFkKQorCQloZWFkID0gdHhxaTsKKwogCWlmICh0eHFpLT50eHEuc3Rh
KSB7CiAJCXN0cnVjdCBzdGFfaW5mbyAqc3RhID0gY29udGFpbmVyX29mKHR4cWktPnR4cS5zdGEs
Ci0JCQkJCQlzdHJ1Y3Qgc3RhX2luZm8sIHN0YSk7CisJCQkJCQkgICAgc3RydWN0IHN0YV9pbmZv
LCBzdGEpOworCQlib29sIGFxbF9jaGVjayA9IGllZWU4MDIxMV90eHFfYWlydGltZV9jaGVjayho
dywgJnR4cWktPnR4cSk7CisJCXM2NCBkZWZpY2l0ID0gc3RhLT5haXJ0aW1lW3R4cWktPnR4cS5h
Y10uZGVmaWNpdDsKKworCQlpZiAoYXFsX2NoZWNrKQorCQkJZm91bmRfZWxpZ2libGVfdHhxID0g
dHJ1ZTsKIAotCQlpZiAoc3RhLT5haXJ0aW1lW3R4cWktPnR4cS5hY10uZGVmaWNpdCA8IDApIHsK
KwkJaWYgKGRlZmljaXQgPCAwKQogCQkJc3RhLT5haXJ0aW1lW3R4cWktPnR4cS5hY10uZGVmaWNp
dCArPQogCQkJCXN0YS0+YWlydGltZV93ZWlnaHQ7CisKKwkJaWYgKGRlZmljaXQgPCAwIHx8ICFh
cWxfY2hlY2spIHsKIAkJCWxpc3RfbW92ZV90YWlsKCZ0eHFpLT5zY2hlZHVsZV9vcmRlciwKIAkJ
CQkgICAgICAgJmxvY2FsLT5hY3RpdmVfdHhxc1t0eHFpLT50eHEuYWNdKTsKIAkJCWdvdG8gYmVn
aW47CkBAIC0zNzM2LDYgKzM3NTAsMzIgQEAgdm9pZCBfX2llZWU4MDIxMV9zY2hlZHVsZV90eHEo
c3RydWN0IGllZWU4MDIxMV9odyAqaHcsCiB9CiBFWFBPUlRfU1lNQk9MKF9faWVlZTgwMjExX3Nj
aGVkdWxlX3R4cSk7CiAKK2Jvb2wgaWVlZTgwMjExX3R4cV9haXJ0aW1lX2NoZWNrKHN0cnVjdCBp
ZWVlODAyMTFfaHcgKmh3LAorCQkJCSBzdHJ1Y3QgaWVlZTgwMjExX3R4cSAqdHhxKQoreworCXN0
cnVjdCBzdGFfaW5mbyAqc3RhOworCXN0cnVjdCBpZWVlODAyMTFfbG9jYWwgKmxvY2FsID0gaHdf
dG9fbG9jYWwoaHcpOworCisJaWYgKCEobG9jYWwtPmFpcnRpbWVfZmxhZ3MgJiBBSVJUSU1FX1VT
RV9BUUwpKQorCQlyZXR1cm4gdHJ1ZTsKKworCWlmICghdHhxLT5zdGEpCisJCXJldHVybiB0cnVl
OworCisJc3RhID0gY29udGFpbmVyX29mKHR4cS0+c3RhLCBzdHJ1Y3Qgc3RhX2luZm8sIHN0YSk7
CisJaWYgKHN0YS0+YWlydGltZVt0eHEtPmFjXS5hcWxfdHhfcGVuZGluZyA8CisJICAgIHN0YS0+
YWlydGltZVt0eHEtPmFjXS5hcWxfbGltaXRfbG93KQorCQlyZXR1cm4gdHJ1ZTsKKworCWlmIChs
b2NhbC0+YXFsX3RvdGFsX3BlbmRpbmdfYWlydGltZSA8IGxvY2FsLT5hcWxfdGhyZXNob2xkICYm
CisJICAgIHN0YS0+YWlydGltZVt0eHEtPmFjXS5hcWxfdHhfcGVuZGluZyA8CisJICAgIHN0YS0+
YWlydGltZVt0eHEtPmFjXS5hcWxfbGltaXRfaGlnaCkKKwkJcmV0dXJuIHRydWU7CisKKwlyZXR1
cm4gZmFsc2U7Cit9CitFWFBPUlRfU1lNQk9MKGllZWU4MDIxMV90eHFfYWlydGltZV9jaGVjayk7
CisKIGJvb2wgaWVlZTgwMjExX3R4cV9tYXlfdHJhbnNtaXQoc3RydWN0IGllZWU4MDIxMV9odyAq
aHcsCiAJCQkJc3RydWN0IGllZWU4MDIxMV90eHEgKnR4cSkKIHsKCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwphdGgxMGsgbWFpbGluZyBsaXN0CmF0aDEw
a0BsaXN0cy5pbmZyYWRlYWQub3JnCmh0dHA6Ly9saXN0cy5pbmZyYWRlYWQub3JnL21haWxtYW4v
bGlzdGluZm8vYXRoMTBrCg==
